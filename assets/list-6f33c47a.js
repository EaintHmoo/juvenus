import{w as U,x as V,r as n,j as e,t as X,S as Y,T as Z,L as tt,y as at,I as et,C as st,z as ot,D as nt,E as lt,F as it,G as rt,H as ct,J as dt,K as ut,M as gt,N as St,A as g,Q as h,W as pt}from"./index-019ce5a6.js";import{T as mt,S as ft,a as ht}from"./table-head-7d54a6e5.js";import{A as Dt}from"./approve-dialog-1c59e89c.js";function xt(){const S=U(),[D]=V(),L=D.get("page"),c=D.get("keyword"),d=D.get("status"),[f,p]=n.useState([]),[u,m]=n.useState(null),[x,b]=n.useState(""),[y,v]=n.useState(""),[l,P]=n.useState(new Date().toISOString().slice(0,10)),[i,F]=n.useState(new Date().toISOString().slice(0,10)),[C,k]=n.useState(!1),[A,N]=n.useState(null),[B,j]=n.useState(!1),[G,_]=n.useState(null),[O,$]=n.useState(!1),[E,w]=n.useState(!1),[T,W]=n.useState(!0),I=async()=>{var r,a;const t=await g.GetStockInList(L,c,d,l,i);p((r=t==null?void 0:t.data)==null?void 0:r.data),m((a=t==null?void 0:t.data)==null?void 0:a.pagination),b(c),v(d),F(i),P(l),W(!1)};n.useEffect(()=>{I()},[]);const H=async(t,r)=>{var s,o;S(`/stock-ins?page=${r}&keyword=${c||""}&status=${d||""}&fromDate=${l||""}&toDate=${i||""}`);const a=await g.GetStockInList(r,c,d,l,i);p((s=a==null?void 0:a.data)==null?void 0:s.data),m((o=a==null?void 0:a.data)==null?void 0:o.pagination)},J=async()=>{S("/stock-ins"),window.location.reload()},M=async t=>{var s,o;S(`/stock-ins?page=1&keyword=${t.target.value}&status=${d||""}&fromDate=${l||""}&toDate=${i||""}`),b(t.target.value);const a=await g.GetStockInList(1,t.target.value,d,l,i);p((s=a==null?void 0:a.data)==null?void 0:s.data),m((o=a==null?void 0:a.data)==null?void 0:o.pagination)},R=async t=>{var s,o;S(`/stock-ins?page=1&keyword=${c||""}&status=${d||""}&fromDate=${t.target.value}&toDate=${i||""}`),P(t.target.value);const a=await g.GetStockInList(1,c,d,t.target.value,i);p((s=a==null?void 0:a.data)==null?void 0:s.data),m((o=a==null?void 0:a.data)==null?void 0:o.pagination)},q=async t=>{var s,o;S(`/stock-ins?page=1&keyword=${c||""}&status=${d||""}&fromDate=${l||""}&toDate=${t.target.value}`),F(t.target.value);const a=await g.GetStockInList(1,c,d,l,t.target.value);p((s=a==null?void 0:a.data)==null?void 0:s.data),m((o=a==null?void 0:a.data)==null?void 0:o.pagination)},z=async t=>{var s,o;S(`/stock-ins?page=1&keyword=${c||""}&status=${t.target.value}&fromDate=${l||""}&toDate=${i||""}`),v(t.target.value);const a=await g.GetStockInList(1,c,t.target.value,l,i);p((s=a==null?void 0:a.data)==null?void 0:s.data),m((o=a==null?void 0:a.data)==null?void 0:o.pagination)},K=async()=>{k(!1),$(!0);const t=await g.DeleteStockIn(A);t.code===200?(h.success(t.message,{theme:"colored"}),setTimeout(()=>{I(),$(!1)},2e3)):(h.error(t.message),$(!0))},Q=async()=>{j(!1),w(!0);const t=await g.ApproveStockIn(G);t.code===200?(h.success(t.message,{theme:"colored"}),setTimeout(()=>{I(),w(!1)},2e3)):(h.error(t.message),w(!0))};return e.jsxs(X,{maxWidth:"xl",children:[e.jsxs(Y,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsx(Z,{variant:"h4",children:"Stock In Management"}),e.jsx(tt,{underline:"hover",color:"primary",to:"/stock-ins/create",children:e.jsx(at,{variant:"contained",color:"primary",startIcon:e.jsx(et,{icon:"eva:plus-fill"}),children:"New Stock In"})})]}),e.jsxs(st,{children:[e.jsx(mt,{filterName:x,filterStatus:y,onFilterName:M,onFilterStatus:z,filterFromDate:l,onFilterFromDate:R,filterToDate:i,onFilterToDate:q,handleClear:J}),T&&e.jsx(ot,{color:"secondary"}),e.jsx(nt,{children:e.jsx(lt,{sx:{overflow:"unset"},children:e.jsxs(it,{sx:{minWidth:1200},children:[e.jsx(ft,{headLabel:[{id:"no",label:"No",align:"center",width:"20px"},{id:"transactionId",label:"Transaction Id",align:"center"},{id:"datetime",label:"DateTime",align:"center"},{id:"shopName",label:"Shop Name",align:"center"},{id:"shopCode",label:"Shop Code",align:"center"},{id:"createdBy",label:"Created By",align:"center"},{id:"status",label:"Status",align:"center"},{id:"action",label:"Action",align:"center"}]}),e.jsx(rt,{children:(f==null?void 0:f.length)>0?f.map((t,r)=>e.jsx(ht,{id:t.id,no:r+1+(u==null?void 0:u.per_page)*((u==null?void 0:u.page)-1),transactionId:t.transaction_code,datetime:t.created_at,shopName:t.shop_name,shopCode:t.shop_code,status:t.status,createdBy:t.created_user,setOpenDialog:k,setDeleteId:N,setOpenApproveDialog:j,setApproveId:_},t.id)):!T&&e.jsx(ct,{query:l+" to "+i+(x?` ${x}`:"")+(y?` ${y}`:""),colSpan:8})})]})})}),u&&e.jsx(dt,{sx:{float:"right"},count:u.total_page,page:u.page,onChange:H})]}),e.jsx(ut,{openDialog:C,setOpenDialog:k,handleDelete:K,disabled:O}),e.jsx(Dt,{openDialog:B,setOpenDialog:j,handleApprove:Q,disabled:E}),e.jsx(gt,{position:St,autoClose:1500})]})}const $t=()=>e.jsxs(e.Fragment,{children:[e.jsx(pt,{children:e.jsx("title",{children:" Juvenus POS | Stock In "})}),e.jsx(xt,{})]});export{$t as default};
