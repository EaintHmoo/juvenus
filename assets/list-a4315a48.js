import{P as i,j as t,a6 as ca,B as W,Y as A,Z as B,a0 as E,a2 as w,y as q,a9 as ua,aa as _,ab as b,am as ha,ao as ga,w as xa,x as ma,r as j,t as fa,S as ja,T as ya,I as Sa,C as pa,z as $a,D as Ta,E as ba,F as Fa,G as Pa,H as Ca,J as Da,M as La,N as wa,A as T,W as va}from"./index-019ce5a6.js";import{T as Ma}from"./TableFooter-12fd2237.js";function R({shopList:f,counterList:S,paymentMethodList:C,filterShop:D,onFilterShop:F,filterFromDate:p,onFilterFromDate:y,filterToDate:$,onFilterToDate:c,filterCashier:G,onFilterCashier:u,filterCounter:v,onFilterCounter:h,filterPaymentMethod:M,onFilterPaymentMethod:g,handleClear:I}){return t.jsx(ca,{sx:{height:96,display:"flex",justifyContent:"space-between"},children:t.jsxs(W,{sx:{display:"flex",justifyContent:"space-between",gap:"1rem"},children:[t.jsx(A,{type:"text",InputLabelProps:{shrink:!0},name:"cashier",defaultValue:G,onChange:u,id:"cashier",label:"Cashier",variant:"outlined"}),t.jsx(A,{type:"date",InputLabelProps:{shrink:!0},name:"from-date",defaultValue:p,onChange:y,id:"from-date",label:"From Date",variant:"outlined"}),t.jsx(A,{type:"date",InputLabelProps:{shrink:!0},name:"to-date",defaultValue:$,onChange:c,id:"to-date",label:"To Date",variant:"outlined"}),t.jsx(B,{sx:{width:"200px"},children:t.jsxs(E,{displayEmpty:!0,value:D||"",defaultValue:D||"",onChange:F,children:[t.jsx(w,{disabled:!0,value:"",children:t.jsx("em",{children:"All Shop"})}),f.map(e=>t.jsxs(w,{value:e==null?void 0:e.id,children:[e==null?void 0:e.name," (",e==null?void 0:e.shop_code,")"]},e==null?void 0:e.id))]})}),t.jsx(B,{sx:{width:"150px"},children:t.jsxs(E,{displayEmpty:!0,value:v||"",defaultValue:v||"",onChange:h,children:[t.jsx(w,{disabled:!0,value:"",children:t.jsx("em",{children:"All Counter"})}),S.map(e=>t.jsx(w,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id))]})}),t.jsx(B,{sx:{width:"150px"},children:t.jsxs(E,{displayEmpty:!0,value:M||"",defaultValue:M||"",onChange:g,children:[t.jsx(w,{disabled:!0,value:"",children:t.jsx("em",{children:"All Payment Method"})}),C.map(e=>t.jsx(w,{value:e==null?void 0:e.id,children:e==null?void 0:e.payment_name},e==null?void 0:e.id))]})}),t.jsx(W,{sx:{alignSelf:"center"},children:t.jsx(q,{variant:"outlined",startIcon:t.jsx(ua,{}),onClick:I,children:"Clear"})})]})})}R.propTypes={shopList:i.array,counterList:i.array,paymentMethodList:i.array,filterShop:i.string,onFilterShop:i.func,filterFromDate:i.string,onFilterFromDate:i.func,filterToDate:i.string,onFilterToDate:i.func,handleClear:i.func,filterCashier:i.string,onFilterCashier:i.func,filterCounter:i.string,onFilterCounter:i.func,filterPaymentMethod:i.string,onFilterPaymentMethod:i.func,handleClear:i.func};function N({no:f,transactionId:S,date:C,salePerson:D,paymentMethods:F,discountAmount:p,amount:y,qty:$}){return t.jsx(t.Fragment,{children:t.jsxs(_,{hover:!0,tabIndex:-1,role:"checkbox",children:[t.jsx(b,{align:"center",children:f}),t.jsx(b,{align:"center",children:S}),t.jsx(b,{align:"center",children:C!=null?new Date(C).toLocaleDateString("en-US",{day:"numeric",year:"numeric",month:"short",hour:"numeric",minute:"numeric"}):void 0}),t.jsx(b,{align:"center",children:D}),t.jsx(b,{align:"center",children:F.join(", ")}),t.jsx(b,{align:"right",children:parseFloat(p).toFixed(2)}),t.jsx(b,{align:"right",children:parseFloat(y).toFixed(2)}),t.jsx(b,{align:"right",children:$})]})})}N.propTypes={no:i.number,qty:i.string,transactionId:i.string,date:i.string,salePerson:i.string,paymentMethods:i.array,discountAmount:i.string,amount:i.string};function H({headLabel:f}){return t.jsx(ha,{children:t.jsx(_,{children:f.map(S=>t.jsx(b,{align:S.align||"left",sx:{width:S.width,minWidth:S.minWidth},children:t.jsx(ga,{hideSortIcon:!0,children:S.label})},S.id))})})}H.propTypes={headLabel:i.array};function Ia(){const f=xa(),[S]=ma(),C=S.get("page"),D=S.get("shop"),[F,p]=j.useState([]),[y,$]=j.useState(null),[c,G]=j.useState(""),[u,v]=j.useState(""),[h,M]=j.useState(""),[g,I]=j.useState(""),[e,O]=j.useState(new Date().toISOString().slice(0,10)),[x,z]=j.useState(new Date().toISOString().slice(0,10)),[k,J]=j.useState(!0),[L,P]=j.useState(),[Q,U]=j.useState([]),[Y,Z]=j.useState([]),[K,X]=j.useState([]),aa=async()=>{var r,s,o,d,V;const n=await T.GetSaleTransactionList(C,c,u,h,g,e,x),m=await T.GetShopList(),a=await T.GetPaymentMethodList(),l=await T.GetCounters();p((s=(r=n==null?void 0:n.data)==null?void 0:r.transactions)==null?void 0:s.data),P((o=n==null?void 0:n.data)==null?void 0:o.total),$((V=(d=n==null?void 0:n.data)==null?void 0:d.transactions)==null?void 0:V.pagination),I(D),U(m==null?void 0:m.data),Z(l==null?void 0:l.data),X(a==null?void 0:a.data),J(!1)};j.useEffect(()=>{aa()},[]);const ta=async(n,m)=>{var l,r,s,o,d;f(`/sale-transaction-report?page=${m}&shop=${g||""}&cashier=${c||""}&paymentMethod=${h}&counter=${u||""}&fromDate=${e||""}&toDate=${x||""}`);const a=await T.GetSaleTransactionList(m,c,u,h,g,e,x);p((r=(l=a==null?void 0:a.data)==null?void 0:l.transactions)==null?void 0:r.data),P((s=a==null?void 0:a.data)==null?void 0:s.total),$((d=(o=a==null?void 0:a.data)==null?void 0:o.transactions)==null?void 0:d.pagination)},ea=async()=>{f("/sale-transaction-report"),window.location.reload()},na=async n=>{var l,r,s,o,d;f(`/sale-transaction-report?page=1&shop=${n.target.value}&cashier=${c||""}&paymentMethod=${h||""}&counter=${u||""}&fromDate=${e||""}&toDate=${x||""}`),I(n.target.value);const a=await T.GetSaleTransactionList(1,c,u,h,n.target.value,e,x);p((r=(l=a==null?void 0:a.data)==null?void 0:l.transactions)==null?void 0:r.data),P((s=a==null?void 0:a.data)==null?void 0:s.total),$((d=(o=a==null?void 0:a.data)==null?void 0:o.transactions)==null?void 0:d.pagination)},ia=async n=>{var l,r,s,o,d;f(`/sale-transaction-report?page=1&shop=${g||""}&cashier=${n.target.value}&paymentMethod=${h||""}&counter=${u||""}&fromDate=${e||""}&toDate=${x||""}`),G(n.target.value);const a=await T.GetSaleTransactionList(1,n.target.value,u,h,g,e,x);p((r=(l=a==null?void 0:a.data)==null?void 0:l.transactions)==null?void 0:r.data),P((s=a==null?void 0:a.data)==null?void 0:s.total),$((d=(o=a==null?void 0:a.data)==null?void 0:o.transactions)==null?void 0:d.pagination)},la=async n=>{var l,r,s,o,d;f(`/sale-transaction-report?page=1&shop=${g||""}&cashier=${c||""}&paymentMethod=${h||""}&counter=${n.target.value}&fromDate=${e||""}&toDate=${x||""}`),v(n.target.value);const a=await T.GetSaleTransactionList(1,c,n.target.value,h,g,e,x);p((r=(l=a==null?void 0:a.data)==null?void 0:l.transactions)==null?void 0:r.data),P((s=a==null?void 0:a.data)==null?void 0:s.total),$((d=(o=a==null?void 0:a.data)==null?void 0:o.transactions)==null?void 0:d.pagination)},ra=async n=>{var l,r,s,o,d;f(`/sale-transaction-report?page=1&shop=${g||""}&cashier=${c||""}&paymentMethod=${n.target.value}&counter=${u||""}&fromDate=${e||""}&toDate=${x||""}`),M(n.target.value);const a=await T.GetSaleTransactionList(1,c,u,n.target.value,g,e,x);p((r=(l=a==null?void 0:a.data)==null?void 0:l.transactions)==null?void 0:r.data),P((s=a==null?void 0:a.data)==null?void 0:s.total),$((d=(o=a==null?void 0:a.data)==null?void 0:o.transactions)==null?void 0:d.pagination)},sa=async n=>{var l,r,s,o,d;f(`/sale-transaction-report?page=1&shop=${g||""}&cashier=${c||""}&paymentMethod=${h||""}&counter=${u||""}&fromDate=${n.target.value}&toDate=${x||""}`),O(n.target.value);const a=await T.GetSaleTransactionList(1,c,u,h,g,n.target.value,x);p((r=(l=a==null?void 0:a.data)==null?void 0:l.transactions)==null?void 0:r.data),P((s=a==null?void 0:a.data)==null?void 0:s.total),$((d=(o=a==null?void 0:a.data)==null?void 0:o.transactions)==null?void 0:d.pagination)},oa=async n=>{var l,r,s,o,d;f(`/sale-transaction-report?page=1&shop=${g||""}&cashier=${c||""}&paymentMethod=${h||""}&counter=${u||""}&fromDate=${e||""}&toDate=${n.target.value}`),z(n.target.value);const a=await T.GetSaleTransactionList(1,c,u,h,g,e,n.target.value);p((r=(l=a==null?void 0:a.data)==null?void 0:l.transactions)==null?void 0:r.data),P((s=a==null?void 0:a.data)==null?void 0:s.total),$((d=(o=a==null?void 0:a.data)==null?void 0:o.transactions)==null?void 0:d.pagination)},da=()=>{T.SaleTransactionExport(c,u,h,g,e,x)};return t.jsxs(fa,{maxWidth:"xl",children:[t.jsxs(ja,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[t.jsx(ya,{variant:"h4",children:"Sale Transaction Report"}),t.jsx(q,{variant:"contained",onClick:da,color:"primary",startIcon:t.jsx(Sa,{icon:"eva:arrow-downward-fill"}),children:"Export"})]}),t.jsxs(pa,{children:[t.jsx(R,{shopList:Q,counterList:Y,paymentMethodList:K,filterShop:g,onFilterShop:na,filterFromDate:e,onFilterFromDate:sa,filterToDate:x,onFilterToDate:oa,filterCashier:c,onFilterCashier:ia,filterCounter:u,onFilterCounter:la,filterPaymentMethod:h,onFilterPaymentMethod:ra,handleClear:ea}),k&&t.jsx($a,{color:"secondary"}),t.jsx(Ta,{children:t.jsx(ba,{sx:{overflow:"unset"},children:t.jsxs(Fa,{sx:{minWidth:1200},children:[t.jsx(H,{headLabel:[{id:"no",label:"No",align:"center",width:"20px"},{id:"transactionId",label:"Transaction Id",align:"center"},{id:"date",label:"Date",align:"center"},{id:"salePerson",label:"Sale Person",align:"center"},{id:"paymentMethod",label:"Payment Methods",align:"center"},{id:"discountAmount",label:"Discount Amount",align:"right"},{id:"amount",label:"Amount",align:"right"},{id:"qty",label:"Quantity",align:"right"}]}),t.jsx(Pa,{children:(F==null?void 0:F.length)>0?F.map((n,m)=>t.jsx(N,{no:m+1+(y==null?void 0:y.per_page)*((y==null?void 0:y.page)-1),transactionId:n.voucher_no,date:n.created_at,salePerson:n.cashier_name,paymentMethods:n.payment_methods,discountAmount:n.discount_amount,amount:n.total,qty:n.qty},m)):!k&&t.jsx(Ca,{query:"for this filter",colSpan:8})}),t.jsx(Ma,{children:t.jsxs(_,{children:[t.jsx(b,{colSpan:6,align:"right",sx:{fontWeight:"bold",fontSize:"14px"},children:"Total"}),t.jsx(b,{align:"right",children:parseFloat((L==null?void 0:L.totalAmount)||0).toFixed(2)}),t.jsx(b,{align:"right",children:(L==null?void 0:L.totalQty)||0})]})})]})})}),y&&t.jsx(Da,{sx:{float:"right"},count:y.total_page,page:y.page,onChange:ta})]}),t.jsx(La,{position:wa,autoClose:1500})]})}const Ba=()=>t.jsxs(t.Fragment,{children:[t.jsx(va,{children:t.jsx("title",{children:" Juvenus POS | Sale Transaction List "})}),t.jsx(Ia,{})]});export{Ba as default};
