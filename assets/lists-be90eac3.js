import{j as t,a6 as A,B as j,Z as D,aj as G,Y as B,y as E,a9 as R,P as u,w as W,x as H,r as s,T as J,C as $,D as q,E as M,F as U,G as Y,H as Z,J as z,M as K,N as Q,A as g,W as V}from"./index-019ce5a6.js";import{O as X,a as tt}from"./table-head-0d0ba1ef.js";import{C as et,S as at}from"./Stack-4cf92a60.js";function C({filterStatus:x,filterName:h,handleClear:m,onFilterStatus:r,customer:o}){return t.jsx(A,{sx:{height:96,display:"flex",justifyContent:"space-between",p:n=>n.spacing(0,1,0,3)},children:t.jsxs(j,{sx:{display:"flex",justifyContent:"space-between",gap:"1rem"},children:[t.jsx(D,{sx:{width:"150px"},children:t.jsx(G,{disablePortal:!0,options:o,getOptionLabel:n=>n.name,onChange:(n,l)=>r(n,l),renderInput:n=>t.jsx(B,{...n,label:"Customer"})})}),t.jsx(j,{sx:{alignSelf:"center"},children:t.jsx(E,{variant:"outlined",sx:{ml:3},startIcon:t.jsx(R,{}),onClick:m,children:"Clear"})})]})})}C.propTypes={filterName:u.string,handleClear:u.func,filterStatus:u.string,onFilterStatus:u.func,customer:u.any};function st(){const x=W(),[h]=H(),m=h.get("page"),r=h.get("keyword"),[o,n]=s.useState([]),[l,p]=s.useState(null),[b,y]=s.useState(!0),[f,nt]=s.useState(""),[it,S]=s.useState(!1),[ot,_]=s.useState(!1);s.useState(!1);const[rt,w]=s.useState(null),[lt,O]=s.useState(null),[T,ct]=s.useState(""),[I,L]=s.useState([]),P=async()=>{var i;const e=await g.GetOutstandingLists(m,r);n(e==null?void 0:e.data.data),p((i=e==null?void 0:e.data)==null?void 0:i.pagination),y(!1)},v=async()=>{const e=await g.GetCustomerLists();L(e==null?void 0:e.data)};s.useEffect(()=>{P(),v()},[]);const F=async(e,i)=>{var c,d;x(`/customer/outstanding/list?page=&customer_id${i.id}=&keyword=`);const a=await g.GetOutstandingLists(m,r,i.id);n((c=a==null?void 0:a.data)==null?void 0:c.data),p((d=a==null?void 0:a.data)==null?void 0:d.pagination)},N=async(e,i)=>{var c,d;x(`/customer/outstanding/list?page=${i}&customer_id=&keyword=`);const a=await g.GetOutstandingLists(i,r);n((c=a==null?void 0:a.data)==null?void 0:c.data),p((d=a==null?void 0:a.data)==null?void 0:d.pagination)},k=async()=>{window.location.reload()};return t.jsxs(et,{maxWidth:"xl",children:[t.jsx(at,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:t.jsx(J,{variant:"h4",children:"Outstanding"})}),t.jsxs($,{children:[t.jsx(C,{filterStatus:T,filterName:f,handleClear:k,customer:I,onFilterStatus:F}),t.jsx(q,{children:t.jsx(M,{sx:{overflow:"unset"},children:t.jsxs(U,{sx:{minWidth:1e3},children:[t.jsx(X,{headLabel:[{id:"id",label:"No",align:"center"},{id:"customer",label:"Customer",align:"center"},{id:"phone_no",label:"Phone Number",align:"center"},{id:"remaining_credit_amount",label:"Remaing Credit Amount",align:"center"},{id:"action",label:"Action",align:"center"}]}),t.jsx(Y,{children:(o==null?void 0:o.length)>0?o.map((e,i)=>t.jsx(tt,{customer_id:e.customer_id,no:e.id,id:i+1,customer:e.customer,phone_no:e.phone,status:e.status,total_credit_amount:e.total_credit_amount,settlement_amount:e.settlement_amount,remaining_credit_amount:e.remaining_credit_amount,created_at:e.created_at,setOpenDialog:S,setOpenApproveDialog:_,setDeleteId:w,setUpdateId:O},e.id)):!b&&t.jsx(Z,{query:f})})]})})}),l&&t.jsx(z,{sx:{float:"right"},count:l.total_page,page:l.page,onChange:N})]}),t.jsx(K,{position:Q,autoClose:1500})]})}function gt(){return t.jsxs(t.Fragment,{children:[t.jsx(V,{children:t.jsx("title",{children:" Juvenus POS | Outstanding List "})}),t.jsx(st,{})]})}export{gt as default};
