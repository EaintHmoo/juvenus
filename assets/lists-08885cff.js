import{j as e,am as Q,aa as A,ab as l,ao as Y,P as a,w as N,r as i,ac as Z,I as O,ad as K,a2 as X,a6 as ee,B as F,a7 as te,a8 as ae,Z as se,aj as ne,Y as ie,y as re,a9 as le,x as oe,T as ce,C as de,D as ue,E as ge,F as he,G as pe,H as xe,J as fe,M as me,N as je,A as S,W as be}from"./index-019ce5a6.js";import{C as _e,S as ye}from"./Stack-4cf92a60.js";function $({headLabel:o}){return e.jsx(Q,{children:e.jsx(A,{children:o.map(r=>e.jsx(l,{align:r.align||"left",sx:{width:r.width,minWidth:r.minWidth},children:e.jsx(Y,{hideSortIcon:!0,children:r.label})},r.id))})})}$.propTypes={headLabel:a.array};function B({no:o,id:r,customer_id:f,used_qty:c,package_name:d,doctor_id:u,therapist_id:n,assistant_id:g,sale_person_id:j,offset_date:I,setOpenDialog:h,setOpenApproveDialog:v,setDeleteId:E,setUpdateId:w}){const T=N(),[m,b]=i.useState(!1),_=y=>{b(y.currentTarget)},k=()=>{T(`/offset/${o}/detail`)};return e.jsxs(e.Fragment,{children:[e.jsxs(A,{hover:!0,tabIndex:-1,role:"checkbox",children:[e.jsx(l,{align:"center",children:r}),e.jsx(l,{align:"center",children:f??"-"}),e.jsx(l,{align:"center",children:c}),e.jsx(l,{align:"center",children:d??"-"}),e.jsx(l,{align:"center",children:u??"-"}),e.jsx(l,{align:"center",children:n??"-"}),e.jsx(l,{align:"center",children:g??"-"}),e.jsx(l,{align:"center",children:j??"-"}),e.jsx(l,{align:"center",children:I??"-"}),e.jsx(l,{align:"right",children:e.jsx(Z,{onClick:_,children:e.jsx(O,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(K,{open:!!m,anchorEl:m,onClose:()=>b(!1),anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:e.jsxs(X,{onClick:k,sx:{mr:2},children:[e.jsx(O,{icon:"ph:eye-bold",sx:{mr:2}}),"View"]})})]})}B.propTypes={no:a.number,id:a.number,package_name:a.string,used_qty:a.string,customer_id:a.string,doctor_id:a.string,therapist_id:a.string,assistant_id:a.string,sale_person_id:a.string,offset_date:a.string,setOpenDialog:a.func,setOpenApproveDialog:a.func,setDeleteId:a.func,setUpdateId:a.func};function q({filterStatus:o,filterName:r,onFilterName:f,handleClear:c,onFilterStatus:d,customer:u}){return e.jsx(ee,{sx:{height:96,display:"flex",justifyContent:"space-between",p:n=>n.spacing(0,1,0,3)},children:e.jsxs(F,{sx:{display:"flex",justifyContent:"space-between",gap:"1rem"},children:[e.jsx(te,{value:r,onChange:f,placeholder:"Search ...",startAdornment:e.jsx(ae,{position:"start",children:e.jsx(O,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),e.jsx(se,{sx:{width:"150px"},children:e.jsx(ne,{disablePortal:!0,options:u,getOptionLabel:n=>n.name,onChange:(n,g)=>d(n,g),renderInput:n=>e.jsx(ie,{...n,label:"Customer"})})}),e.jsx(F,{sx:{alignSelf:"center"},children:e.jsx(re,{variant:"outlined",sx:{ml:3},startIcon:e.jsx(le,{}),onClick:c,children:"Clear"})})]})})}q.propTypes={filterName:a.string,onFilterName:a.func,handleClear:a.func,filterStatus:a.string,onFilterStatus:a.func,customer:a.any};function Ce(){const o=N(),[r]=oe(),f=r.get("page"),c=r.get("keyword"),[d,u]=i.useState([]),[n,g]=i.useState(null),[j,I]=i.useState(!0),[h,v]=i.useState(""),[E,w]=i.useState(!1),[T,m]=i.useState(!1);i.useState(!1);const[b,_]=i.useState(null),[k,y]=i.useState(null),[p,W]=i.useState(""),[G,U]=i.useState([]),H=async()=>{var s;const t=await S.GetOffsetLists(f,c);u(t==null?void 0:t.data.data),g((s=t==null?void 0:t.data)==null?void 0:s.pagination)},M=async()=>{const t=await S.GetCustomerLists();U(t==null?void 0:t.data)};i.useEffect(()=>{H(),M()},[]);const C=async(t=1,s=h,P=p)=>{var D,L;o(`/offset/list?page=${t}&keyword=${s}&customer=${P}`);const x=await S.GetOffsetLists(t,s,P);u((D=x==null?void 0:x.data)==null?void 0:D.data),g((L=x==null?void 0:x.data)==null?void 0:L.pagination)},R=async t=>{const s=t.target.value;v(s),C(1,s,p)},z=(t,s)=>{W(s.id),C(1,h,s.id)},J=async(t,s)=>{o(`/offset/list?page=${s}&keyword=${c===null?"":c}&customer=${p===null?"":p}`),C(s,h,p)},V=async()=>{o("/offset/list"),window.location.reload()};return e.jsxs(_e,{maxWidth:"xl",children:[e.jsx(ye,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(ce,{variant:"h4",children:"Offset"})}),e.jsxs(de,{children:[e.jsx(q,{filterStatus:p,filterName:h,onFilterName:R,handleClear:V,customer:G,onFilterStatus:z}),e.jsx(ue,{children:e.jsx(ge,{sx:{overflow:"unset"},children:e.jsxs(he,{sx:{minWidth:1e3},children:[e.jsx($,{headLabel:[{id:"id",label:"No",align:"center"},{id:"customer_id",label:"Customer",align:"center"},{id:"use_qty",label:"Used Qty",align:"center"},{id:"package_name",label:"Package",align:"center"},{id:"doctor_id",label:"Doctor",align:"center"},{id:"therapist_id",label:"Therapist",align:"center"},{id:"assistant_id",label:"Assistant",align:"center"},{id:"sale_person_id",label:"Sale Person",align:"center"},{id:"offset_date",label:"Offset Date",align:"center"},{id:"action",label:"Action",align:"center"}]}),e.jsx(pe,{children:d?d.map((t,s)=>e.jsx(B,{no:t.id,id:s+1,customer_id:t.customer_id,used_qty:t.used_qty,package_name:t.package,doctor_id:t.doctor_id,therapist_id:t.therapist_id,assistant_id:t.assistant_id,sale_person_id:t.sale_person_id,offset_date:t.offset_date,setOpenDialog:w,setOpenApproveDialog:m,setDeleteId:_,setUpdateId:y},t.id)):!j&&e.jsx(xe,{query:h})})]})})}),n&&e.jsx(fe,{sx:{float:"right"},count:n.total_page,page:n.page,onChange:J})]}),e.jsx(me,{position:je,autoClose:1500})]})}function Ie(){return e.jsxs(e.Fragment,{children:[e.jsx(be,{children:e.jsx("title",{children:" Juvenus POS | Offset List "})}),e.jsx(Ce,{})]})}export{Ie as default};
