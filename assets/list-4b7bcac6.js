import{w as U,x as V,r as l,j as a,t as X,S as Y,T as Z,L as tt,y as et,I as at,C as st,z as ot,D as lt,E as nt,F as it,G as rt,H as dt,J as ct,K as ut,M as gt,N as mt,A as g,Q as f,W as pt}from"./index-019ce5a6.js";import{T as St,S as ht,a as ft}from"./table-head-98595357.js";import{A as yt}from"./approve-dialog-1c59e89c.js";function jt(){const m=U(),[y]=V(),C=y.get("page"),i=y.get("keyword"),r=y.get("status"),[p,S]=l.useState([]),[u,h]=l.useState(null),[j,v]=l.useState(""),[x,k]=l.useState(""),[d,F]=l.useState(new Date().toISOString().slice(0,10)),[c,T]=l.useState(new Date().toISOString().slice(0,10)),[N,D]=l.useState(!1),[I,L]=l.useState(null),[B,b]=l.useState(!1),[_,G]=l.useState(null),[O,P]=l.useState(!1),[q,w]=l.useState(!1),[A,E]=l.useState(!0),$=async()=>{var n,e;const t=await g.GetStockAdjustmentList(C,i,r,d,c);S((n=t==null?void 0:t.data)==null?void 0:n.data),h((e=t==null?void 0:t.data)==null?void 0:e.pagination),v(i),k(r),T(c),F(d),E(!1)};l.useEffect(()=>{$()},[]);const R=async(t,n)=>{var s,o;m(`/stock-adjustments?page=${n}&keyword=${i||""}&status=${r||""}`);const e=await g.GetStockAdjustmentList(n,i,r);S((s=e==null?void 0:e.data)==null?void 0:s.data),h((o=e==null?void 0:e.data)==null?void 0:o.pagination)},W=async()=>{m("/stock-adjustments"),window.location.reload()},H=async t=>{var s,o;m(`/stock-adjustments?page=1&keyword=${t.target.value}&status=${r||""}&fromDate=${d||""}&toDate=${c||""}`),v(t.target.value);const e=await g.GetStockAdjustmentList(1,t.target.value,r,d,c);S((s=e==null?void 0:e.data)==null?void 0:s.data),h((o=e==null?void 0:e.data)==null?void 0:o.pagination)},J=async t=>{var s,o;m(`/stock-adjustments?page=1&keyword=${i||""}&status=${t.target.value}&fromDate=${d||""}&toDate=${c||""}`),k(t.target.value);const e=await g.GetStockAdjustmentList(1,i,t.target.value,d,c);S((s=e==null?void 0:e.data)==null?void 0:s.data),h((o=e==null?void 0:e.data)==null?void 0:o.pagination)},M=async t=>{var s,o;m(`/stock-adjustments?page=1&keyword=${i||""}&status=${r||""}&fromDate=${t.target.value}&toDate=${c||""}`),F(t.target.value);const e=await g.GetStockAdjustmentList(1,i,r,t.target.value,c);S((s=e==null?void 0:e.data)==null?void 0:s.data),h((o=e==null?void 0:e.data)==null?void 0:o.pagination)},Q=async t=>{var s,o;m(`/stock-adjustments?page=1&keyword=${i||""}&status=${r||""}&fromDate=${d||""}&toDate=${t.target.value}`),T(t.target.value);const e=await g.GetStockAdjustmentList(1,i,r,d,t.target.value);S((s=e==null?void 0:e.data)==null?void 0:s.data),h((o=e==null?void 0:e.data)==null?void 0:o.pagination)},z=async()=>{D(!1),P(!0);const t=await g.DeleteStockAdjustment(I);t.code===200?(f.success(t.message,{theme:"colored"}),setTimeout(()=>{$(),P(!1)},2e3)):(f.error(t.message),P(!0))},K=async()=>{b(!1),w(!0);const t=await g.ApproveStockAdjustment(_);t.code===200?(f.success(t.message,{theme:"colored"}),setTimeout(()=>{$(),w(!1)},2e3)):(f.error(t.message),setTimeout(()=>{w(!1)},2e3))};return a.jsxs(X,{maxWidth:"xl",children:[a.jsxs(Y,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[a.jsx(Z,{variant:"h4",children:"Stock Adjustment Management"}),a.jsx(tt,{underline:"hover",color:"primary",to:"/stock-adjustments/create",children:a.jsx(et,{variant:"contained",color:"primary",startIcon:a.jsx(at,{icon:"eva:plus-fill"}),children:"New Stock Adjustment"})})]}),a.jsxs(st,{children:[a.jsx(St,{filterName:j,filterStatus:x,onFilterName:H,onFilterStatus:J,filterFromDate:d,onFilterFromDate:M,filterToDate:c,onFilterToDate:Q,handleClear:W}),A&&a.jsx(ot,{color:"secondary"}),a.jsx(lt,{children:a.jsx(nt,{sx:{overflow:"unset"},children:a.jsxs(it,{sx:{minWidth:1200},children:[a.jsx(ht,{headLabel:[{id:"no",label:"No",align:"center",width:"20px"},{id:"shopCode",label:"Shop Code",align:"center"},{id:"shopName",label:"Shop Name",align:"center"},{id:"productCode",label:"Product Code",align:"center"},{id:"productName",label:"Product Name",align:"center"},{id:"qty",label:"Quantity",align:"right"},{id:"datetime",label:"DateTime",align:"center"},{id:"responsiblePerson",label:"Responsible Person",align:"center"},{id:"createdBy",label:"Created By",align:"center"},{id:"status",label:"Status",align:"center"},{id:"action",label:"Action",align:"center"}]}),a.jsx(rt,{children:(p==null?void 0:p.length)>0?p==null?void 0:p.map((t,n)=>a.jsx(ft,{id:t.id,no:n+1+(u==null?void 0:u.per_page)*((u==null?void 0:u.page)-1),productName:t.product_name,productCode:t.product_code,datetime:t.created_at,shopName:t.shop_name,shopCode:t.shop_code,status:t.status,createdBy:t.created_user,type:t.type,qty:t.qty,responsiblePerson:t.responsible_person,setOpenDialog:D,setDeleteId:L,setOpenApproveDialog:b,setApproveId:G},t.id)):!A&&a.jsx(dt,{query:d+" to "+c+(j?` ${j}`:"")+(x?` ${x}`:""),colSpan:11})})]})})}),u&&a.jsx(ct,{sx:{float:"right"},count:u.total_page,page:u.page,onChange:R})]}),a.jsx(ut,{openDialog:N,setOpenDialog:D,handleDelete:z,disabled:O}),a.jsx(yt,{openDialog:B,setOpenDialog:b,handleApprove:K,disabled:q}),a.jsx(gt,{position:mt,autoClose:1500})]})}const Pt=()=>a.jsxs(a.Fragment,{children:[a.jsx(pt,{children:a.jsx("title",{children:" Juvenus POS | Stock Adjustment "})}),a.jsx(jt,{})]});export{Pt as default};
