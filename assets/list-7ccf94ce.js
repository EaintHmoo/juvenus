import{P as S,j as a,a6 as N,B as C,Y as P,Z as Y,a0 as H,a2 as b,y as M,a9 as Z,k as B,aa as q,af as u,ab as Q,aE as _,w as X,x as A,r as h,t as ee,S as ae,T,I as te,C as le,z as ne,E as F,al as D,F as w,G as I,M as re,N as se,A as m,W as ie}from"./index-019ce5a6.js";function $({shopList:s,filterShop:y,onFilterShop:j,filterFromDate:e,onFilterFromDate:x,filterToDate:c,onFilterToDate:g,handleClear:i}){return a.jsx(N,{sx:{height:96,display:"flex",justifyContent:"space-between"},children:a.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",gap:"1rem"},children:[a.jsx(P,{type:"date",InputLabelProps:{shrink:!0},name:"from-date",defaultValue:e,onChange:x,id:"from-date",label:"From Date",variant:"outlined"}),a.jsx(P,{type:"date",InputLabelProps:{shrink:!0},name:"to-date",defaultValue:c,onChange:g,id:"to-date",label:"To Date",variant:"outlined"}),a.jsx(Y,{sx:{width:"200px"},children:a.jsxs(H,{displayEmpty:!0,value:y||"",defaultValue:y||"",onChange:j,children:[a.jsx(b,{disabled:!0,value:"",children:a.jsx("em",{children:"All Shop"})}),s.map(r=>a.jsxs(b,{value:r==null?void 0:r.id,children:[r==null?void 0:r.name," (",r==null?void 0:r.shop_code,")"]},r==null?void 0:r.id))]})}),a.jsx(C,{sx:{alignSelf:"center"},children:a.jsx(M,{variant:"outlined",startIcon:a.jsx(Z,{}),onClick:i,children:"Clear"})})]})})}$.propTypes={shopList:S.array,onFilterShop:S.func,filterFromDate:S.string,onFilterFromDate:S.func,filterToDate:S.string,onFilterToDate:S.func,handleClear:S.func};const d=B(q)(({theme:s})=>({"td, th":{border:"1px solid",borderColor:u.A400}})),l=B(Q)(({theme:s})=>({[`&.${_.head}`]:{backgroundColor:s.palette.common.black,color:s.palette.common.white},[`&.${_.body}`]:{fontSize:14}}));function ce(){const s=X(),[y]=A(),j=y.get("shop"),[e,x]=h.useState(),[c,g]=h.useState(""),[i,r]=h.useState(new Date().toISOString().slice(0,10)),[o,k]=h.useState(new Date().toISOString().slice(0,10)),[E,G]=h.useState(!0),[L,W]=h.useState([]),R=async()=>{var v;const t=await m.GetTransactionSummary(j,i,o),n=await m.GetShopList();x(t==null?void 0:t.data),g(j),G(!1),W((v=n==null?void 0:n.data)==null?void 0:v.sort((p,f)=>p.id>f.id?1:p.id<f.id?-1:0))};h.useEffect(()=>{R()},[]);const O=async()=>{s("/transaction-summary-report"),window.location.reload()},V=async t=>{console.log(i,o),s(`/transaction-summary-report?shop=${t.target.value}&fromDate=${i||""}&toDate=${o||""}`),g(t.target.value);const n=await m.GetTransactionSummary(t.target.value,i,o);x(n==null?void 0:n.data)},z=async t=>{s(`/transaction-summary-report?shop=${c||""}&fromDate=${t.target.value}&toDate=${o||""}`),r(t.target.value);const n=await m.GetTransactionSummary(c,t.target.value,o);x(n==null?void 0:n.data)},U=async t=>{s(`/transaction-summary-report?shop=${c||""}&fromDate=${i||""}&toDate=${t.target.value}`),k(t.target.value);const n=await m.GetTransactionSummary(c,i,t.target.value);x(n==null?void 0:n.data)},J=[{name:"Total Cash Amount",sale_value:(e==null?void 0:e.totalCashSales)||0,settlement_value:(e==null?void 0:e.totalSettlementCashSales)||0},{name:"Total MPU Amount",sale_value:(e==null?void 0:e.totalMpuSales)||0,settlement_value:(e==null?void 0:e.totalSettlementMpuSales)||0},{name:"Total JCB Amount",sale_value:(e==null?void 0:e.totalJcbSales)||0,settlement_value:(e==null?void 0:e.totalSettlementJcbSales)||0},{name:"Total Visa Amount",sale_value:(e==null?void 0:e.totalVisaSales)||0,settlement_value:(e==null?void 0:e.totalSettlementVisaSales)||0},{name:"Total Master Amount",sale_value:(e==null?void 0:e.totalMasterSales)||0,settlement_value:(e==null?void 0:e.totalSettlementMasterSales)||0},{name:"Total Union Pay Amount",sale_value:(e==null?void 0:e.totalUnionPaySales)||0,settlement_value:(e==null?void 0:e.totalSettlementUnionPaySales)||0},{name:"Total Kbz Pay Amount",sale_value:(e==null?void 0:e.totalKbzPaySales)||0,settlement_value:(e==null?void 0:e.totalSettlementKbzPaySales)||0},{name:"Total CB Pay Amount",sale_value:(e==null?void 0:e.totalCbPaySales)||0,settlement_value:(e==null?void 0:e.totalSettlementCbPaySales)||0},{name:"Total Aya Pay Amount",sale_value:(e==null?void 0:e.totalAyaPaySales)||0,settlement_value:(e==null?void 0:e.totalSettlementAyaPaySales)||0},{name:"Total Wave Pay Amount",sale_value:(e==null?void 0:e.totalWavePaySales)||0,settlement_value:(e==null?void 0:e.totalSettlementWavePaySales)||0},{name:"Total One Pay Amount",sale_value:(e==null?void 0:e.totalOnePaySales)||0,settlement_value:(e==null?void 0:e.totalSettlementOnePaySales)||0},{name:"Total Sai Sai Pay Amount",sale_value:(e==null?void 0:e.totalSaiSaiPaySales)||0,settlement_value:(e==null?void 0:e.totalSettlementSaiSaiPaySales)||0},{name:"Total Foc Amount",sale_value:(e==null?void 0:e.totalFocSales)||0,settlement_value:(e==null?void 0:e.totalSettlementFocSales)||0},{name:"Total Gift Card Amount",sale_value:(e==null?void 0:e.totalGiftCardSales)||0,settlement_value:(e==null?void 0:e.totalSettlementGiftCardSales)||0},{name:"Total Credit Amount",sale_value:(e==null?void 0:e.totalCreditSales)||0,settlement_value:"-"},{name:"Total Amount",sale_value:(e==null?void 0:e.subTotalSaleAmount)||0,settlement_value:(e==null?void 0:e.totalSettlementAmount)||0}],K=()=>{m.TransactionSummaryReportExport(c,i,o)};return a.jsxs(ee,{maxWidth:"xl",children:[a.jsxs(ae,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[a.jsx(T,{variant:"h4",children:"Transaction Summary Report"}),a.jsx(M,{variant:"contained",onClick:K,color:"primary",startIcon:a.jsx(te,{icon:"eva:arrow-downward-fill"}),children:"Export"})]}),a.jsxs(le,{children:[a.jsx($,{shopList:L,filterShop:c,onFilterShop:V,filterFromDate:i,onFilterFromDate:z,filterToDate:o,onFilterToDate:U,handleClear:O}),E&&a.jsx(ne,{color:"secondary"}),a.jsxs(F,{component:D,sx:{padding:"1.5rem"},children:[a.jsx(T,{variant:"h5",component:"h5",sx:{p:t=>t.spacing(2,0,2,0)},children:"Payment Method Summary"}),a.jsx(w,{children:a.jsxs(I,{children:[a.jsxs(d,{sx:{backgroundColor:u[600]},children:[a.jsx(l,{sx:{color:u[50],fontWeight:"bolder"},children:"Payment Method"}),a.jsx(l,{sx:{color:u[50],fontWeight:"bolder"},align:"right",children:"Sale Amount"}),a.jsx(l,{sx:{color:u[50],fontWeight:"bolder"},align:"right",children:"Settlement Amount"})]}),J.map((t,n)=>a.jsxs(d,{children:[a.jsx(l,{children:t.name}),a.jsx(l,{align:"right",children:t.sale_value}),a.jsx(l,{align:"right",children:t.settlement_value})]},n))]})})]}),a.jsxs(F,{component:D,sx:{padding:"1.5rem"},children:[a.jsx(T,{variant:"h5",component:"h5",sx:{p:t=>t.spacing(2,0,2,0)},children:"All Summary"}),a.jsx(w,{children:a.jsxs(I,{children:[a.jsxs(d,{children:[a.jsx(l,{children:"Sub Total Amount"}),a.jsx(l,{align:"right",children:(e==null?void 0:e.subTotalSaleAmount)||0})]}),a.jsxs(d,{children:[a.jsx(l,{children:"Total Premium Discount Amount"}),a.jsx(l,{align:"right",children:(e==null?void 0:e.totalPremiumDiscountAmount)||0})]}),a.jsxs(d,{children:[a.jsx(l,{children:"Total Additional Discount Amount"}),a.jsx(l,{align:"right",children:(e==null?void 0:e.totalAdditionalDiscountAmount)||0})]}),a.jsxs(d,{children:[a.jsx(l,{children:"Total Tax Amount"}),a.jsx(l,{align:"right",children:parseFloat((e==null?void 0:e.totalPremiumTaxAmount)||0).toFixed(2)})]}),a.jsxs(d,{children:[a.jsx(l,{children:"Total Net Amount"}),a.jsx(l,{align:"right",children:(e==null?void 0:e.totalSaleAmount)||0})]}),a.jsxs(d,{children:[a.jsx(l,{children:"Cash In Hand Amount(Sale + Settlement)"}),a.jsx(l,{align:"right",children:(e==null?void 0:e.totalCashSales)||0+(e==null?void 0:e.totalSettlementCashSales)||0})]})]})})]})]}),a.jsx(re,{position:se,autoClose:1500})]})}const de=()=>a.jsxs(a.Fragment,{children:[a.jsx(ie,{children:a.jsx("title",{children:" Juvenus POS | Transaction Summary "})}),a.jsx(ce,{})]});export{de as default};
