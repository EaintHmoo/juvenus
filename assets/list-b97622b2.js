import{w as J,x as M,r as s,j as a,t as R,S as q,T as z,L as K,y as Q,I as U,C as V,z as X,D as Y,E as Z,F as ee,G as ae,H as te,J as se,K as ie,M as ne,N as le,A as o,Q as u,W as re}from"./index-019ce5a6.js";import{T as oe,S as ce,G as de,A as ue}from"./active-dialog-51e34dc3.js";function ge(){const g=J(),[f]=M(),w=f.get("page"),c=f.get("keyword"),m=f.get("status"),[d,h]=s.useState([]),[i,x]=s.useState(null),[p,G]=s.useState(""),[A,b]=s.useState(!1),[T,j]=s.useState(!1),[N,S]=s.useState(null),[P,I]=s.useState(null),[L,k]=s.useState(null),[B,v]=s.useState(!1),[F,C]=s.useState(!1),[D,_]=s.useState(!0),y=async()=>{var n,t;const e=await o.GetGiftCardList(w,c,m);h((n=e==null?void 0:e.data)==null?void 0:n.data),x((t=e==null?void 0:e.data)==null?void 0:t.pagination),G(c),_(!1)};s.useEffect(()=>{y()},[]);const E=async(e,n)=>{var l,r;g(`/gift-cards?page=${n}&keyword=${c||""}`);const t=await o.GetGiftCardList(n,c,m);h((l=t==null?void 0:t.data)==null?void 0:l.data),x((r=t==null?void 0:t.data)==null?void 0:r.pagination)},O=async()=>{g("/gift-cards"),window.location.reload()},$=async e=>{var l,r;g(`/gift-cards?page=1&keyword=${e.target.value}`),G(e.target.value);const t=await o.GetGiftCardList(1,e.target.value,m);h((l=t==null?void 0:t.data)==null?void 0:l.data),x((r=t==null?void 0:t.data)==null?void 0:r.pagination)},W=async()=>{b(!1),v(!0);const e=await o.DeleteGiftCard(P);e.code===200?(u.success(e.message,{theme:"colored"}),setTimeout(()=>{y(),v(!1)},2e3)):(u.error(e.message),v(!1))},H=async()=>{j(!1),C(!0);const e=await o.ActiveGiftCard(L);e.code===200?(u.success(e.message,{theme:"colored"}),setTimeout(()=>{y(),C(!1)},2e3)):(u.error(e.message),C(!1))};return a.jsxs(R,{maxWidth:"xl",children:[a.jsxs(q,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[a.jsx(z,{variant:"h4",children:"Gift Card Management"}),a.jsx(K,{underline:"hover",color:"primary",to:"/gift-cards/create",children:a.jsx(Q,{variant:"contained",color:"primary",startIcon:a.jsx(U,{icon:"eva:plus-fill"}),children:"New Gift Card"})})]}),a.jsxs(V,{children:[a.jsx(oe,{filterNumber:p,onFilterNumber:$,handleClear:O}),D&&a.jsx(X,{color:"secondary"}),a.jsx(Y,{children:a.jsx(Z,{sx:{overflow:"unset"},children:a.jsxs(ee,{sx:{minWidth:1200},children:[a.jsx(ce,{headLabel:[{id:"no",label:"No",align:"center",width:"20px"},{id:"cardNumber",label:"Card Number",align:"center"},{id:"amount",label:"Amount",align:"right"},{id:"createdBy",label:"Created By",align:"center"},{id:"isActive",label:"Status",align:"center"},{id:"datetime",label:"DateTime",align:"center"},{id:"action",label:"Action",align:"center"}]}),a.jsx(ae,{children:(d==null?void 0:d.length)>0?d.map((e,n)=>a.jsx(de,{id:e.id,no:n+1+(i==null?void 0:i.per_page)*((i==null?void 0:i.page)-1),cardNumber:e.card_number,amount:e.amount,isActive:!!e.is_active,datetime:e.created_at,createdBy:e.created_user,setOpenDialog:b,setDeleteId:I,setOpenActiveDialog:j,setActiveId:k,setIsActiveDialog:S},e.id)):!D&&a.jsx(te,{query:p,colSpan:7})})]})})}),i&&a.jsx(se,{sx:{float:"right"},count:i.total_page,page:i.page,onChange:E})]}),a.jsx(ie,{openDialog:A,setOpenDialog:b,handleDelete:W,disabled:B}),a.jsx(ue,{openDialog:T,isActiveDialog:N,setIsActiveDialog:S,setOpenDialog:j,handleActive:H,disabled:F}),a.jsx(ne,{position:le,autoClose:1500})]})}const he=()=>a.jsxs(a.Fragment,{children:[a.jsx(re,{children:a.jsx("title",{children:" Juvenus POS | Gift Card "})}),a.jsx(ge,{})]});export{he as default};
