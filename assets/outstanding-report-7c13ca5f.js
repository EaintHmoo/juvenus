import{w as _,j as a,aa as k,ab as x,P as i,am as N,ao as W,r as p,A as b,a6 as H,B as J,a7 as V,a8 as z,I as v,Z as D,aj as G,Y as U,y as O,a9 as Y,x as Z,t as q,S as K,T as M,C as Q,z as X,D as aa,E as ea,F as ta,G as na,J as oa,W as ra}from"./index-019ce5a6.js";function F({no:l,id:r,name:y,voucher_no:w,payable_amount:u,address:m,phone_no:j,customer_code:n}){return _(),a.jsx(a.Fragment,{children:a.jsxs(k,{hover:!0,tabIndex:-1,role:"checkbox",children:[a.jsx(x,{align:"center",children:l}),a.jsx(x,{align:"center",children:n}),a.jsx(x,{align:"center",children:y}),a.jsx(x,{align:"center",children:w}),a.jsx(x,{align:"center",children:u}),a.jsx(x,{align:"center",children:j}),a.jsx(x,{align:"center",children:m})]})})}F.propTypes={no:i.number,id:i.number,name:i.string,voucher_no:i.string,address:i.string,payable_amount:i.number,phone_no:i.string,customer_code:i.string};function R({headLabel:l}){return a.jsx(N,{children:a.jsx(k,{children:l.map(r=>a.jsx(x,{align:r.align||"left",sx:{width:r.width,minWidth:r.minWidth},children:a.jsx(W,{hideSortIcon:!0,children:r.label})},r.id))})})}R.propTypes={headLabel:i.array};function S({filter:l,onFilterChange:r,handleClear:y,onFilterCustomer:w}){const[u,m]=p.useState([]);p.useEffect(()=>{j()},[]);const j=async()=>{var c;const n=await b.getAllUsers();m((c=n==null?void 0:n.data)==null?void 0:c.data)};return a.jsx(H,{sx:{height:96,display:"flex",justifyContent:"space-between",p:n=>n.spacing(0,1,0,3)},children:a.jsxs(J,{children:[a.jsx(V,{defaultValue:l==null?void 0:l.keyword,onChange:r,name:"keyword",placeholder:"Search ...",startAdornment:a.jsx(z,{position:"start",children:a.jsx(v,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),a.jsx(D,{sx:{width:"150px",ml:4},children:a.jsx(G,{disablePortal:!0,options:u,getOptionLabel:n=>n.customer_code,onChange:(n,c)=>w(n,c),renderInput:n=>a.jsx(U,{...n,label:"Customer"})})}),a.jsx(O,{variant:"outlined",sx:{ml:3},startIcon:a.jsx(Y,{}),onClick:y,children:"Clear"})]})})}S.propTypes={filter:i.object,onFilterChange:i.func,handleClear:i.func,onFilterCustomer:i.func};function sa(){const[l,r]=p.useState([]),[y,w]=p.useState(!0),u=_(),[m]=Z(),j=m.get("page"),n=m.get("customer_code"),c=m.get("keyword"),[d,T]=p.useState(null),[g,I]=p.useState({page:j??1,keyword:c??"",customer:n??0}),P=()=>{b.OutstandingReportExport(g)},A=async t=>{var e,h;const o={...g,page:1,[t.target.name]:t.target.value};console.log(o),u(`/outstanding-report?page=${o.page}&keyword=${o.keyword}`);const s=await b.OutstandingReport(o);r((e=s==null?void 0:s.data)==null?void 0:e.data),T((h=s==null?void 0:s.data)==null?void 0:h.pagination)};p.useEffect(()=>{L()},[]);const E=async()=>{u("/outstanding-report"),window.location.reload()},L=async()=>{var o,s,e;const t=await b.OutstandingReport(g);r((o=t.data)==null?void 0:o.data),T((s=t==null?void 0:t.data)==null?void 0:s.pagination),console.log((e=t==null?void 0:t.data)==null?void 0:e.data),w(!1)},$=async(t,o)=>{var h,C,f;const s={...g,page:o,keyword:g.keyword!=null?g.keyword:""};u(`/outstanding-report?page=${o}&keyword=${c===null?"":c}`);const e=await b.OutstandingReport(s);r((h=e==null?void 0:e.data)==null?void 0:h.data),T((C=e==null?void 0:e.data)==null?void 0:C.pagination),console.log((f=e==null?void 0:e.data)==null?void 0:f.data)},B=async(t,o)=>{var h,C,f;I({...g,customer:o.customer_code});const s={page:1,keyword:"",customer:o.customer_code??0};u(`/outstanding-report?page=${j}&keyword=${c===null?"":c}&customer_code=${n===null?"":o.customer_code}`);const e=await b.OutstandingReport(s);r((h=e==null?void 0:e.data)==null?void 0:h.data),T((C=e==null?void 0:e.data)==null?void 0:C.pagination),console.log((f=e==null?void 0:e.data)==null?void 0:f.data)};return a.jsxs(q,{maxWidth:"xl",children:[a.jsxs(K,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[a.jsx(M,{variant:"h4",children:"Outstanding Customer Report"}),a.jsx(O,{variant:"contained",onClick:P,color:"primary",startIcon:a.jsx(v,{icon:"eva:arrow-downward-fill"}),children:"Export"})]}),a.jsxs(Q,{children:[a.jsx(S,{filter:g,onFilterChange:A,handleClear:E,onFilterCustomer:B}),y&&a.jsx(X,{color:"secondary"}),a.jsx(aa,{children:a.jsx(ea,{sx:{overflow:"unset"},children:a.jsxs(ta,{sx:{minWidth:1e3},children:[a.jsx(R,{headLabel:[{id:"no",label:"No",align:"center"},{id:"code",label:"Customer Code",align:"center"},{id:"name",label:"Customer Name",align:"center"},{id:"voucher_no",label:"Voucher No",align:"center"},{id:"payable_amount",label:"Payable Amount",align:"center"},{id:"phone_no",label:"Phone No",align:"center"},{id:"address",label:"Address",align:"center"}]}),a.jsx(na,{children:(l==null?void 0:l.length)>0&&l.map((t,o)=>a.jsx(F,{no:o+1+(d==null?void 0:d.row_count)*((d==null?void 0:d.page)-1),customer_code:t.customer_code,name:t.name,voucher_no:t.voucher_no,payable_amount:t.payable_amount,phone_no:t.phone_no,address:t.address},t.id))})]})})}),d&&a.jsx(oa,{sx:{float:"right",p:"20px"},count:d.total_page,page:d.page,onChange:$})]})]})}function la(){return a.jsxs(a.Fragment,{children:[a.jsx(ra,{children:a.jsx("title",{children:" Juvenus POS | Customer Report "})}),a.jsx(sa,{})]})}export{la as default};
