import{w as P,a4 as w,r as i,A as d,j as e,t as D,S as q,O as N,L as m,T as R,C as S,B as r,R as g,V as B,X as L,Y as n,Z as p,$ as b,a0 as j,a1 as k,a2 as f,y as A,a3 as F,M,N as T,Q as o,W as G}from"./index-019ce5a6.js";import"./table-empty-rows-bf3b5365.js";function O(){const y=P(),{id:c}=w(),[a,u]=i.useState({user:"",name:"",phone_no:"",email:"",drug_illegy:"",date_of_birth:"",main_concern:"",medical_history:"",emergency_contact_name:"",emergency_contact_phone:"",relationship:"",gender:"",city_id:1,address:"",nrc:""}),_=async s=>{const t=await d.GetUser(s);console.log(t.data),u(t.data)};i.useEffect(()=>{_(c)},[]);const[C,v]=i.useState([]),[W,x]=i.useState(!1);i.useEffect(()=>{U()},[]);const l=s=>{u({...a,[s.target.name]:s.target.value})},U=async()=>{const s=await d.getCity();console.log(s.data),v(s==null?void 0:s.data)},E=async s=>{s.preventDefault(),console.log(a),x(!0);const t=await d.EditUser(a,c);console.log(t),t.code===200?(o.success(t.message,{theme:"colored"}),setTimeout(()=>y("/users"),2e3)):(x(!1),o.error(t.message))},I=async s=>{u({...a,photo:s});const t=new FormData;t.append("user_id",c),t.append("photo",s);const h=await d.UploadUserPhoto(t);h.code===200?o.success(h.message,{theme:"colored"}):o.error(h.message)};return e.jsxs(D,{maxWidth:"lg",children:[e.jsx(q,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsxs(N,{"aria-label":"breadcrumb",children:[e.jsx(m,{underline:"hover",color:"inherit",to:"/dashboard",children:"Dashbaord"}),e.jsx(m,{underline:"hover",color:"inherit",to:"/users",children:"User Management"}),e.jsx(R,{color:"text.primary",children:"Create"})]})}),e.jsx(S,{children:e.jsx(r,{sx:{p:4},children:e.jsxs("form",{onSubmit:E,children:[e.jsx(g,{sx:{mb:3},children:e.jsx(B,{label:"Upload Image",size:"small"})}),e.jsx(r,{children:e.jsx(L,{selectedImage:a.photo,handleChangeImage:I})}),e.jsx(g,{sx:{mb:3}}),e.jsxs(r,{sx:{mb:3,display:"flex",gap:2,height:""},children:[e.jsx(n,{name:"name",id:"outlined-basic",value:a.customer_code,fullWidth:!0,label:"Customer_code",variant:"outlined",disabled:!0,InputLabelProps:{shrink:!0}}),e.jsx(n,{name:"name",id:"outlined-basic",value:a.name,fullWidth:!0,label:"Name",variant:"outlined",onChange:l,required:!0})]}),e.jsxs(r,{sx:{mb:3,display:"flex",gap:2},children:[e.jsx(n,{name:"phone_no",id:"outlined-basic",value:a.phone_no,fullWidth:!0,label:"Phone",variant:"outlined",onChange:l,required:!0}),e.jsx(n,{type:"email",name:"email",id:"outlined-basic",value:a.email,fullWidth:!0,label:"Email",variant:"outlined",onChange:l,required:!0})]}),e.jsxs(r,{sx:{mb:3,display:"flex",gap:2},children:[e.jsxs(p,{fullWidth:!0,children:[e.jsx(b,{id:"demo-simple-select-label",children:"Gender *"}),e.jsx(j,{name:"gender",labelId:"demo-simple-select-label",id:"demo-simple-select",onChange:l,value:a.gender,required:!0,children:Object.entries(k).map(([s,t])=>e.jsx(f,{value:t,children:s},t))})]}),e.jsx(n,{name:"nrc",label:"NRC",value:a.nrc,fullWidth:!0,onChange:l,required:!0})]}),e.jsxs(r,{sx:{mb:3,display:"flex",gap:2},children:[e.jsx(n,{name:"drug_illegy",label:"Drug Allergy",value:a.drug_illegy,fullWidth:!0,onChange:l,required:!0}),e.jsx(n,{name:"main_concern",label:"Concern",fullWidth:!0,value:a.main_concern,onChange:l})]}),e.jsxs(r,{sx:{mb:3,display:"flex",gap:2},children:[e.jsx(n,{type:"date",name:"date_of_birth",value:a.date_of_birth,label:"Date Of Brith",fullWidth:!0,onChange:l,InputLabelProps:{shrink:!0}}),e.jsx(n,{name:"medical_history",label:"Medical History",fullWidth:!0,value:a.medical_history,onChange:l})]}),e.jsxs(r,{sx:{mb:3,display:"flex",gap:2},children:[e.jsx(n,{name:"emergency_contact_name",label:"Emergency Name",fullWidth:!0,value:a.emergency_contact_name,onChange:l,required:!0}),e.jsx(n,{name:"emergency_contact_phone",label:"Emergency Phone Number",fullWidth:!0,value:a.emergency_contact_phone,onChange:l,required:!0})]}),e.jsxs(r,{sx:{mb:3,display:"flex",gap:2},children:[e.jsx(n,{name:"relationship",label:"Relationship",fullWidth:!0,value:a.relationship,onChange:l}),e.jsxs(p,{fullWidth:!0,children:[e.jsx(b,{id:"demo-simple-select-label",children:"City "}),e.jsx(j,{name:"city_id",labelId:"demo-simple-select-label",value:a.city_id,id:"demo-simple-select",onChange:l,label:"city",children:C.map(s=>e.jsx(f,{value:s.id,children:s.city_name},s.id))})]})]}),e.jsx(r,{sx:{mb:3,display:"flex",gap:2},children:e.jsx(n,{name:"address",label:"Address",fullWidth:!0,value:a.address,onChange:l})}),e.jsxs(r,{sx:{pb:3,display:"flex",mt:2,float:"right"},children:[e.jsx(m,{underline:"hover",color:"primary",to:"/users",children:e.jsx(A,{variant:"outlined",color:"primary",sx:{borderRadius:1,marginRight:1},children:"Cancel"})}),e.jsx(F,{type:"submit",size:"medium",variant:"contained",sx:{borderRadius:1},loading:W,children:"Update"})]})]})})}),e.jsx(M,{position:T,autoClose:1500})]})}function H(){return e.jsxs(e.Fragment,{children:[e.jsx(G,{children:e.jsx("title",{children:" Ngwe Zay | Edit User "})}),e.jsx(O,{})]})}export{H as default};
