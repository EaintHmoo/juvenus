import{P as r,j as a,a6 as la,B as I,Y as z,Z as ra,a0 as oa,a2 as B,y as q,a9 as sa,aa as D,ab as n,am as da,ao as ca,k as O,af as L,aE as E,w as xa,x as ha,r as y,t as ga,S as ua,T as G,I as ja,C as pa,z as fa,D as ma,E as N,F as R,G as A,H as Sa,J as ya,al as ba,M as Ta,N as Da,A as F,W as Fa}from"./index-019ce5a6.js";import{T as Ca}from"./TableFooter-12fd2237.js";function H({shopList:o,filterShop:u,onFilterShop:w,filterFromDate:P,onFilterFromDate:b,filterToDate:m,onFilterToDate:e,handleClear:S}){return a.jsx(la,{sx:{height:96,display:"flex",justifyContent:"space-between"},children:a.jsxs(I,{sx:{display:"flex",justifyContent:"space-between",gap:"1rem"},children:[a.jsx(z,{type:"date",InputLabelProps:{shrink:!0},name:"from-date",defaultValue:P,onChange:b,id:"from-date",label:"From Date",variant:"outlined"}),a.jsx(z,{type:"date",InputLabelProps:{shrink:!0},name:"to-date",defaultValue:m,onChange:e,id:"to-date",label:"To Date",variant:"outlined"}),a.jsx(ra,{sx:{width:"200px"},children:a.jsxs(oa,{displayEmpty:!0,value:u||"",defaultValue:u||"",onChange:w,children:[a.jsx(B,{disabled:!0,value:"",children:a.jsx("em",{children:"All Shop"})}),o.map(l=>a.jsxs(B,{value:l==null?void 0:l.id,children:[l==null?void 0:l.name," (",l==null?void 0:l.shop_code,")"]},l==null?void 0:l.id))]})}),a.jsx(I,{sx:{alignSelf:"center"},children:a.jsx(q,{variant:"outlined",startIcon:a.jsx(sa,{}),onClick:S,children:"Clear"})})]})})}H.propTypes={shopList:r.array,filterShop:r.string,onFilterShop:r.func,filterFromDate:r.string,onFilterFromDate:r.func,filterToDate:r.string,onFilterToDate:r.func,handleClear:r.func};function M({no:o,productName:u,productCode:w,qty:P,price:b,discount:m,tax:e,totalAmount:S,remark:l}){return a.jsx(a.Fragment,{children:a.jsxs(D,{hover:!0,tabIndex:-1,role:"checkbox",children:[a.jsx(n,{align:"center",children:o}),a.jsx(n,{align:"center",children:u}),a.jsx(n,{align:"center",children:w}),a.jsx(n,{align:"right",children:P}),a.jsx(n,{align:"right",children:b}),a.jsx(n,{align:"right",children:parseFloat(m).toFixed(2)}),a.jsx(n,{align:"right",children:parseFloat(e).toFixed(2)}),a.jsx(n,{align:"right",children:S}),a.jsx(n,{align:"center",children:l})]})})}M.propTypes={no:r.number,productName:r.string,productCode:r.string,qty:r.string,price:r.string,discount:r.string,tax:r.string,totalAmount:r.string,remark:r.string};function V({headLabel:o}){return a.jsx(da,{children:a.jsx(D,{children:o.map(u=>a.jsx(n,{align:u.align||"left",sx:{width:u.width,minWidth:u.minWidth},children:a.jsx(ca,{hideSortIcon:!0,children:u.label})},u.id))})})}V.propTypes={headLabel:r.array};const C=O(D)(({theme:o})=>({"td, th":{border:"1px solid",borderColor:L.A400}})),g=O(n)(({theme:o})=>({[`&.${E.head}`]:{backgroundColor:o.palette.common.black,color:o.palette.common.white},[`&.${E.body}`]:{fontSize:14}}));function Pa(){const o=xa(),[u]=ha(),w=u.get("page"),P=u.get("shop"),[b,m]=y.useState([]),[e,S]=y.useState(),[l,v]=y.useState(null),[T,_]=y.useState(""),[p,J]=y.useState(new Date().toISOString().slice(0,10)),[f,Q]=y.useState(new Date().toISOString().slice(0,10)),[$,U]=y.useState(!0),[Y,Z]=y.useState([]),K=async()=>{var t,s,d,c,x,h;console.log(p,f);const i=await F.GetDailyTransactionList(w,P,p,f),j=await F.GetShopList();m((s=(t=i==null?void 0:i.data)==null?void 0:t.product_transactions)==null?void 0:s.data),S((d=i==null?void 0:i.data)==null?void 0:d.total),v((x=(c=i==null?void 0:i.data)==null?void 0:c.product_transactions)==null?void 0:x.pagination),_(P),U(!1),Z((h=j==null?void 0:j.data)==null?void 0:h.sort((k,W)=>k.id>W.id?1:k.id<W.id?-1:0))};y.useEffect(()=>{K()},[]);const X=async(i,j)=>{var s,d,c,x,h;o(`/daily-transaction-report?page=${j}&shop=${T||""}&fromDate=${p||""}&toDate=${f||""}`);const t=await F.GetDailyTransactionList(j,T,p,f);m((d=(s=t==null?void 0:t.data)==null?void 0:s.product_transactions)==null?void 0:d.data),S((c=t==null?void 0:t.data)==null?void 0:c.total),v((h=(x=t==null?void 0:t.data)==null?void 0:x.product_transactions)==null?void 0:h.pagination)},aa=async()=>{o("/daily-transaction-report"),window.location.reload()},ta=async i=>{var s,d,c,x,h;o(`/daily-transaction-report?page=1&shop=${i.target.value}&fromDate=${p||""}&toDate=${f||""}`),_(i.target.value);const t=await F.GetDailyTransactionList(1,i.target.value,p,f);m((d=(s=t==null?void 0:t.data)==null?void 0:s.product_transactions)==null?void 0:d.data),S((c=t==null?void 0:t.data)==null?void 0:c.total),v((h=(x=t==null?void 0:t.data)==null?void 0:x.product_transactions)==null?void 0:h.pagination)},ea=async i=>{var s,d,c,x,h;o(`/daily-transaction-report?page=1&shop=${T||""}&fromDate=${i.target.value}&toDate=${f||""}`),J(i.target.value);const t=await F.GetDailyTransactionList(1,T,i.target.value,f);m((d=(s=t==null?void 0:t.data)==null?void 0:s.product_transactions)==null?void 0:d.data),S((c=t==null?void 0:t.data)==null?void 0:c.total),v((h=(x=t==null?void 0:t.data)==null?void 0:x.product_transactions)==null?void 0:h.pagination)},ia=async i=>{var s,d,c,x,h;o(`/daily-transaction-report?page=1&shop=${T||""}&fromDate=${p||""}&toDate=${i.target.value}`),Q(i.target.value);const t=await F.GetDailyTransactionList(1,T,p,i.target.value);m((d=(s=t==null?void 0:t.data)==null?void 0:s.product_transactions)==null?void 0:d.data),S((c=t==null?void 0:t.data)==null?void 0:c.total),v((h=(x=t==null?void 0:t.data)==null?void 0:x.product_transactions)==null?void 0:h.pagination)},na=()=>{F.DailySaleSummaryExport(T,p,f)};return a.jsxs(ga,{maxWidth:"xl",children:[a.jsxs(ua,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[a.jsx(G,{variant:"h4",children:"Daily Sale Summary Report"}),a.jsx(q,{variant:"contained",onClick:na,color:"primary",startIcon:a.jsx(ja,{icon:"eva:arrow-downward-fill"}),children:"Export"})]}),a.jsxs(pa,{children:[a.jsx(H,{shopList:Y,filterShop:T,onFilterShop:ta,filterFromDate:p,onFilterFromDate:ea,filterToDate:f,onFilterToDate:ia,handleClear:aa}),$&&a.jsx(fa,{color:"secondary"}),a.jsx(ma,{children:a.jsx(N,{sx:{overflow:"unset"},children:a.jsxs(R,{sx:{minWidth:1200},children:[a.jsx(V,{headLabel:[{id:"no",label:"No",align:"center",width:"20px"},{id:"productCode",label:"Product Code",align:"center"},{id:"productName",label:"Product Name",align:"center"},{id:"qty",label:"Quantity",align:"right"},{id:"unitPrice",label:"Unit Price",align:"right"},{id:"discount",label:"Discount",align:"right"},{id:"tax",label:"Tax",align:"right"},{id:"total",label:"Total",align:"right"},{id:"remark",label:"Remark",align:"center"}]}),a.jsx(A,{children:(b==null?void 0:b.length)>0?b.map((i,j)=>a.jsx(M,{no:j+1+(l==null?void 0:l.per_page)*((l==null?void 0:l.page)-1),productName:i.product_name,productCode:i.product_code,qty:i.qty,price:i.unit_price,discount:i.discount_amount,tax:i.tax_amount,totalAmount:i.total_price,remark:i.is_foc?"FOC":""},j)):!$&&a.jsx(Sa,{query:"for this date and shop",colSpan:9})}),a.jsxs(Ca,{children:[a.jsxs(D,{children:[a.jsx(n,{colSpan:7,align:"right",sx:{fontWeight:"bold",fontSize:"14px"},children:"Sub Total Amount"}),a.jsx(n,{align:"right",sx:{fontWeight:"bold",fontSize:"14px"},children:(e==null?void 0:e.subTotalSaleAmount)||0}),a.jsx(n,{})]}),a.jsxs(D,{children:[a.jsx(n,{colSpan:7,align:"right",sx:{fontWeight:"bold",fontSize:"14px"},children:"Total Premium Discount Amount"}),a.jsx(n,{align:"right",sx:{fontWeight:"bold",fontSize:"14px"},children:parseFloat((e==null?void 0:e.totalPremiumDiscountAmount)||0).toFixed(2)}),a.jsx(n,{})]}),a.jsxs(D,{children:[a.jsx(n,{colSpan:7,align:"right",sx:{fontWeight:"bold",fontSize:"14px"},children:"Total Additional Discount Amount"}),a.jsx(n,{align:"right",sx:{fontWeight:"bold",fontSize:"14px"},children:(e==null?void 0:e.totalAdditionalDiscountAmount)||0}),a.jsx(n,{})]}),a.jsxs(D,{children:[a.jsx(n,{colSpan:7,align:"right",sx:{fontWeight:"bold",fontSize:"14px"},children:"Total Tax Amount"}),a.jsx(n,{align:"right",sx:{fontWeight:"bold",fontSize:"14px"},children:parseFloat((e==null?void 0:e.totalPremiumTaxAmount)||0).toFixed(2)}),a.jsx(n,{})]}),a.jsxs(D,{children:[a.jsx(n,{colSpan:7,align:"right",sx:{fontWeight:"bold",fontSize:"14px"},children:"Total Net Amount"}),a.jsx(n,{align:"right",sx:{fontWeight:"bold",fontSize:"14px"},children:(e==null?void 0:e.totalSaleAmount)||0}),a.jsx(n,{})]})]})]})})}),l&&a.jsx(ya,{sx:{float:"right"},count:l.total_page,page:l.page,onChange:X}),a.jsxs(N,{component:ba,sx:{padding:"1.5rem"},children:[a.jsx(G,{variant:"h5",component:"h5",sx:{p:i=>i.spacing(2,0,2,0)},children:"Payment Method Summary"}),a.jsx(R,{children:a.jsxs(A,{children:[a.jsxs(C,{children:[a.jsx(g,{width:"50%",children:"Total Cash Sales Amount"}),a.jsx(g,{children:e==null?void 0:e.totalCashSales})]}),a.jsxs(C,{children:[a.jsx(g,{children:"Total Bank Sales Amount"}),a.jsx(g,{children:e==null?void 0:e.totalBankSales})]}),a.jsxs(C,{children:[a.jsx(g,{children:"Total Foc Sales Amount"}),a.jsx(g,{children:e==null?void 0:e.totalFocSales})]}),a.jsxs(C,{children:[a.jsx(g,{children:"Total Gift Card Sales Amount"}),a.jsx(g,{children:e==null?void 0:e.totalGiftCardSales})]}),a.jsxs(C,{children:[a.jsx(g,{children:"Total Credit Sales Amount"}),a.jsx(g,{children:e==null?void 0:e.totalCreditSales})]}),a.jsxs(C,{children:[a.jsx(g,{children:"Total Settlement Amount"}),a.jsx(g,{children:e==null?void 0:e.totalSettlementAmount})]}),a.jsxs(C,{sx:{backgroundColor:L[700],color:L[50]},children:[a.jsx(g,{sx:{color:L[50]},children:"Total Actual Recieved Amount"}),a.jsx(g,{sx:{color:L[50]},children:e==null?void 0:e.totalActualRecivedAmount})]})]})})]})]}),a.jsx(Ta,{position:Da,autoClose:1500})]})}const La=()=>a.jsxs(a.Fragment,{children:[a.jsx(Fa,{children:a.jsx("title",{children:" Juvenus POS | Daily Transaction List "})}),a.jsx(Pa,{})]});export{La as default};
