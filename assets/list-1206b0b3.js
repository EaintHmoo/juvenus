import{w as I,x as N,r as i,j as a,t as $,S as F,T as G,L as A,y as E,I as W,C as H,z as J,D as R,E as q,F as z,U as K,G as M,H as Q,J as V,K as X,M as Y,N as Z,A as c,Q as k,W as ee}from"./index-019ce5a6.js";import{T as ae,U as te}from"./table-empty-rows-bf3b5365.js";function se(){const g=I(),[h]=N(),m=h.get("page"),b=h.get("keyword"),_=h.get("date_of_birth"),[d,u]=i.useState([]),[n,x]=i.useState(null),[r,j]=i.useState({page:m??1,keyword:b??"",dateOfBirth:_??""}),[S,f]=i.useState(!1),[B,O]=i.useState(null),[C,p]=i.useState(!1),[y,D]=i.useState(!0),w=async()=>{var s,t;const e=await c.GetUserList(r);u((s=e==null?void 0:e.data)==null?void 0:s.data),console.log(e.data),x((t=e==null?void 0:e.data)==null?void 0:t.pagination),j({...r,keyword:b,page:m}),D(!1)};i.useEffect(()=>{w()},[]);const L=async(e,s)=>{var l,U;const t={page:s,keyword:r.keyword!=null?r.keyword:"",dateOfBirth:r.dateOfBirth};g(`/users?page=${t.page}&keyword=${t.keyword}&dateOfBirth=${t.dateOfBirth}`);const o=await c.GetUserList(t);u((l=o==null?void 0:o.data)==null?void 0:l.data),x((U=o==null?void 0:o.data)==null?void 0:U.pagination)},P=async()=>{g("/users"),window.location.reload()},T=async e=>{var o,l;const s={...r,page:1,[e.target.name]:e.target.value};g(`/users?page=${s.page}&keyword=${s.keyword}&dateOfBirth=${s.dateOfBirth}`),j({...r,[e.target.name]:e.target.value});const t=await c.GetUserList(s);u((o=t==null?void 0:t.data)==null?void 0:o.data),x((l=t==null?void 0:t.data)==null?void 0:l.pagination)},v=async()=>{f(!1),p(!0);const e=await c.DeleteUser(B);e.code===200?(k.success(e.message,{theme:"colored"}),setTimeout(()=>w(),2e3),p(!1)):k.error(e.message)};return a.jsxs($,{maxWidth:"xl",children:[a.jsxs(F,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[a.jsx(G,{variant:"h4",children:"Users"}),a.jsx(A,{underline:"hover",color:"primary",to:"/users/create",children:a.jsx(E,{variant:"contained",color:"primary",startIcon:a.jsx(W,{icon:"eva:plus-fill"}),children:"New User"})})]}),a.jsxs(H,{children:[a.jsx(ae,{filter:r,handleFilter:T,handleClear:P}),y&&a.jsx(J,{color:"secondary"}),a.jsx(R,{children:a.jsx(q,{sx:{overflow:"unset"},children:a.jsxs(z,{sx:{minWidth:1e3},children:[a.jsx(K,{headLabel:[{id:"no",label:"No",align:"center"},{id:"customer_code",label:"Customer Code",align:"center"},{id:"name",label:"Name",align:"center"},{id:"phone_no",label:"Phone Number",align:"center"},{id:"gender",label:"Gender",align:"center"},{id:"date_of_birth",label:"Date Of Birth",align:"center"},{id:"address",label:"Address",align:"center"},{id:"status",label:"Status",align:"center"},{id:"action",label:"Action",align:"center"}]}),a.jsx(M,{children:(d==null?void 0:d.length)>0?d.map((e,s)=>a.jsx(te,{no:s+1+(n==null?void 0:n.row_count)*((n==null?void 0:n.page)-1),customer_code:e.customer_code,id:e.id,name:e.name,phone_no:e.phone_no,gender:e.gender,address:e.address,dateOfBirth:e.date_of_birth,status:e.status,setOpenDialog:f,setDeleteId:O,pagination:n},e.id)):!y&&a.jsx(Q,{query:r.keyword})})]})})}),n&&a.jsx(V,{sx:{float:"right",p:"20px"},count:n.total_page,page:n.page,onChange:L})]}),a.jsx(X,{openDialog:S,setOpenDialog:f,handleDelete:v,disabled:C}),a.jsx(Y,{position:Z,autoClose:1500})]})}function oe(){return a.jsxs(a.Fragment,{children:[a.jsx(ee,{children:a.jsx("title",{children:" Juvenus POS | Users "})}),a.jsx(se,{})]})}export{oe as default};
