import{w as O,x as A,r as n,j as t,t as W,S as H,T as J,C as M,z as R,D as q,E as z,F as K,G as Q,H as U,J as V,K as X,M as Y,N as Z,A as u,Q as N,W as aa}from"./index-019ce5a6.js";import{T as ea,D as ta,a as sa}from"./table-head-985e53af.js";function oa(){const m=O(),[y]=A(),S=y.get("page"),r=y.get("keyword"),[g,h]=n.useState([]),[i,D]=n.useState(null),[f,b]=n.useState(""),[c,w]=n.useState(new Date().toISOString().slice(0,10)),[d,P]=n.useState(new Date().toISOString().slice(0,10)),[F,x]=n.useState(!1),[$,C]=n.useState(null),[v,p]=n.useState(!1),[j,L]=n.useState(!0),T=async()=>{var l,e;const a=await u.GetDraftTransactionList(S,r,c,d);h((l=a==null?void 0:a.data)==null?void 0:l.data),D((e=a==null?void 0:a.data)==null?void 0:e.pagination),b(r),L(!1)};n.useEffect(()=>{T()},[]);const k=async(a,l)=>{var s,o;m(`/draft-transactions?page=${l}&keyword=${r||""}&fromDate=${c}&toDate=${d||""}`);const e=await u.GetDraftTransactionList(l,r,c,d);h((s=e==null?void 0:e.data)==null?void 0:s.data),D((o=e==null?void 0:e.data)==null?void 0:o.pagination)},I=async()=>{m("/draft-transactions"),window.location.reload()},_=async a=>{var s,o;m(`/draft-transactions?page=1&keyword=${a.target.value}&fromDate=${c}&toDate=${d||""}`),b(a.target.value);const e=await u.GetDraftTransactionList(1,a.target.value);h((s=e==null?void 0:e.data)==null?void 0:s.data),D((o=e==null?void 0:e.data)==null?void 0:o.pagination)},G=async a=>{var s,o;m(`/draft-transactions?page=1&keyword=${r||""}&fromDate=${a.target.value}&toDate=${d||""}`),w(a.target.value);const e=await u.GetDraftTransactionList(1,r,a.target.value,d);h((s=e==null?void 0:e.data)==null?void 0:s.data),D((o=e==null?void 0:e.data)==null?void 0:o.pagination)},B=async a=>{var s,o;m(`/draft-transactions?page=1&keyword=${r||""}&fromDate=${c||""}&toDate=${a.target.value}`),P(a.target.value);const e=await u.GetDraftTransactionList(1,r,c,a.target.value);h((s=e==null?void 0:e.data)==null?void 0:s.data),D((o=e==null?void 0:e.data)==null?void 0:o.pagination)},E=async()=>{x(!1),p(!0);const a=await u.DeleteDraftTransaction($);a.code===200?(N.success(a.message,{theme:"colored"}),setTimeout(()=>{T(),p(!1)},2e3)):(N.error(a.message),p(!0))};return t.jsxs(W,{maxWidth:"xl",children:[t.jsx(H,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:t.jsx(J,{variant:"h4",children:"Draft Transaction Management"})}),t.jsxs(M,{children:[t.jsx(ea,{filterName:f,onFilterName:_,filterFromDate:c,onFilterFromDate:G,filterToDate:d,onFilterToDate:B,handleClear:I}),j&&t.jsx(R,{color:"secondary"}),t.jsx(q,{children:t.jsx(z,{sx:{overflow:"unset"},children:t.jsxs(K,{sx:{minWidth:1200},children:[t.jsx(ta,{headLabel:[{id:"no",label:"No",align:"center",width:"20px"},{id:"voucherNo",label:"Transaction Id",align:"center"},{id:"customerName",label:"Customer Name",align:"center"},{id:"shopCode",label:"Shop Code",align:"center"},{id:"shopName",label:"Shop Name",align:"center"},{id:"counterName",label:"Counter Name",align:"center"},{id:"cashierName",label:"Cashier Name",align:"center"},{id:"total",label:"Total",align:"right"},{id:"saleType",label:"Sale Type",align:"center"},{id:"datetime",label:"Date Time",align:"center"},{id:"action",label:"Action",align:"center"}]}),t.jsx(Q,{children:(g==null?void 0:g.length)>0?g==null?void 0:g.map((a,l)=>t.jsx(sa,{id:a.id,no:l+1+(i==null?void 0:i.per_page)*((i==null?void 0:i.page)-1),voucherNo:a.voucher_no,customerName:a.customer,shopCode:a.shop_code,shopName:a.shop_name,counterName:a.counter,cashierName:a.cashier,saleType:a.sales_type,datetime:a.created_at,total:parseFloat(a.total),setOpenDialog:x,setDeleteId:C},a.id)):!j&&t.jsx(U,{query:c+" to "+d+(f?` ${f}`:""),colSpan:11})})]})})}),i&&t.jsx(V,{sx:{float:"right"},count:i.total_page,page:i.page,onChange:k})]}),t.jsx(X,{openDialog:F,setOpenDialog:x,handleDelete:E,disabled:v}),t.jsx(Y,{position:Z,autoClose:1500})]})}const ia=()=>t.jsxs(t.Fragment,{children:[t.jsx(aa,{children:t.jsx("title",{children:" Juvenus POS | Draft Transaction "})}),t.jsx(oa,{})]});export{ia as default};
