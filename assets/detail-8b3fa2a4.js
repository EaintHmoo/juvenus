import{a4 as T,r as i,j as e,V as I,t as w,S as B,O as P,ag as O,T as p,C as R,an as c,E as x,F as m,G as u,aa as o,ab as n,am as W,L as N,y as E,a3 as F,M as L,N as z,A as b,Q as f,W as U}from"./index-019ce5a6.js";import"./table-head-7d54a6e5.js";import{A as M}from"./approve-dialog-1c59e89c.js";import{T as Q}from"./TableFooter-12fd2237.js";const l=r=>r!=null?new Date(r).toLocaleDateString("en-US",{hour:"numeric",minute:"numeric"}):void 0,q=()=>{var g,S;const{id:r}=T(),[a,k]=i.useState({}),[A,d]=i.useState(!1),[j,h]=i.useState(!1),v=async()=>{const s=await b.GetStockIn(r);s.code===200&&k(s.data)},y=async()=>{d(!1),h(!0);const s=await b.ApproveStockIn(r);s.code===200?(f.success(s.message,{theme:"colored"}),setTimeout(()=>{v(),h(!1)},2e3)):(f.error(s.message),h(!0))},_=()=>{d(!0)};i.useEffect(()=>{v()},[]);const D=[{name:"Transaction ID",value:a.transaction_code||""},{name:"Date",value:l(a.created_at)},{name:"Shop Name",value:a.shop_name},{name:"Shop Code",value:a.shop_code},{name:"Status",value:e.jsx(I,{label:a.status,sx:{textTransform:"capitalize"},color:a.status=="pending"?"warning":"success"})}],C=[{name:"Created By",value:a.created_user},{name:"Created At",value:l(a.created_at)},{name:"Updated By",value:a.updated_user},{name:"Updated At",value:l(a.updated_at)},{name:"Approved By",value:a.approved_user},{name:"Approved At",value:l(a.approved_at)}];return e.jsxs(w,{maxWidth:"xl",children:[e.jsx(B,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsxs(P,{"aria-label":"breadcrumb",children:[e.jsx(O,{variant:"h4",underline:"hover",color:"inherit",href:"/stock-ins",children:"Stock In Management"}),e.jsx(p,{variant:"h4",children:"Stock In Detail"})]})}),e.jsxs(R,{sx:{padding:"1rem"},children:[e.jsxs(c,{sx:{mt:"0.5rem"},children:[e.jsx(p,{variant:"h5",children:"Stock Detail"}),e.jsx(x,{children:e.jsx(m,{sx:{minWidth:650},children:e.jsx(u,{children:D.map((s,t)=>e.jsxs(o,{children:[e.jsx(n,{component:"th",scope:"row",children:s.name}),e.jsx(n,{children:s.value})]},t))})})})]}),e.jsxs(c,{sx:{mt:"1.5rem"},children:[e.jsx(p,{variant:"h5",children:"Stock In"}),e.jsx(x,{children:e.jsxs(m,{sx:{minWidth:650,mt:"1rem"},children:[e.jsx(W,{children:e.jsxs(o,{children:[e.jsx(n,{width:50,children:"#"}),e.jsx(n,{width:200,children:"Product Code"}),e.jsx(n,{children:"Product Name"}),e.jsx(n,{align:"right",children:"Qty"})]})}),e.jsx(u,{children:(g=a==null?void 0:a.stock_in_detail)==null?void 0:g.map((s,t)=>e.jsxs(o,{children:[e.jsx(n,{component:"th",scope:"row",children:t+1}),e.jsx(n,{children:s.product_code??""}),e.jsx(n,{children:s.product_name??""}),e.jsx(n,{align:"right",children:s.qty})]},t))}),e.jsx(Q,{children:e.jsxs(o,{children:[e.jsx(n,{component:"th",align:"right",colSpan:3,scope:"row",sx:{fontSize:"14px",fontWeight:"bold"},children:"Qty"}),e.jsx(n,{align:"right",sx:{fontSize:"14px",fontWeight:"bold"},children:(S=a==null?void 0:a.stock_in_detail)==null?void 0:S.reduce((s,t)=>s+t.qty,0)})]})})]})})]}),e.jsx(c,{sx:{mt:"1.5rem"},children:e.jsx(x,{children:e.jsx(m,{sx:{minWidth:650},children:e.jsx(u,{children:C.map((s,t)=>e.jsxs(o,{children:[e.jsx(n,{component:"th",scope:"row",children:s.name}),e.jsx(n,{children:s.value})]},t))})})})}),e.jsxs(c,{sx:{pb:3,display:"flex",mt:2,float:"right"},children:[e.jsx(N,{underline:"hover",color:"primary",to:"/stock-ins",children:e.jsx(E,{variant:"outlined",color:"primary",sx:{borderRadius:1,marginRight:1},children:"Cancel"})}),a.status!=="approved"&&e.jsx(F,{type:"button",size:"medium",variant:"contained",onClick:_,loading:j,sx:{borderRadius:1},children:"Approve"})]})]}),e.jsx(M,{openDialog:A,setOpenDialog:d,handleApprove:y,disabled:j}),e.jsx(L,{position:z,autoClose:1500})]})},$=()=>e.jsxs(e.Fragment,{children:[e.jsx(U,{children:e.jsx("title",{children:" Juvenus POS | Stock In "})}),e.jsx(q,{})]});export{$ as default};
