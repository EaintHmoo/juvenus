import{w as K,r as s,aF as V,aH as x,j as t,t as X,S as ee,O as te,L as p,T as se,y as I,C as ae,B as r,Z as f,$ as g,a0 as b,a2 as S,Y as _,a3 as oe,M as ne,N as re,A as a,Q as P,W as le}from"./index-019ce5a6.js";function ie(){const k=K(),[w,j]=s.useState(!1);s.useState(!1),s.useState(!1);const[v,T]=s.useState(null),[l,i]=s.useState([]),[d,L]=s.useState([]),[y,A]=s.useState(null),[B,F]=s.useState(null),[R,O]=s.useState(null),[Q,de]=s.useState(V.pending),[c,W]=s.useState([]),[u,C]=s.useState(null),[h,q]=s.useState(null),[o,E]=s.useState(null),G=async()=>{const e=await a.GetConversionProductLists();i(e==null?void 0:e.data),L(e==null?void 0:e.data)},N=async()=>{const e=await a.GetShopLists();W(e==null?void 0:e.data)},J=()=>{const e=JSON.parse(localStorage.getItem("user"));q(e.role_id),E(e.shop_id)},D=async()=>{if(o){const e=await a.GetStockProductListsByShopId(o);i(e.data),C(o)}};s.useEffect(()=>{G(),N(),J()},[]),s.useEffect(()=>{h!==x.Admin&&D()},[h,o]);const M=async e=>{e.preventDefault();const m={pos_shop_id:u,from_product:v,to_product:y,from_qty:B,to_qty:R,status:Q,approved_at:null,created_by:JSON.parse(localStorage.getItem("user")).name,updated_by:null,approved_by:null};j(!0);const n=await a.CreateConversion(m);console.log(n),n.code===200?(P.success(n.message,{theme:"colored"}),setTimeout(()=>k("/conversion/list"),2e3)):(j(!1),P.error(n.message))},z=e=>{T(e.target.value)},H=e=>{A(e.target.value)},U=e=>{F(e.target.value)},Y=e=>{O(e.target.value)},Z=async e=>{C(e.target.value);const m=await a.GetStockProductListsByShopId(e.target.value);i(m.data)},$=()=>{window.history.back()};return t.jsxs(X,{maxWidth:"lg",children:[t.jsxs(ee,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[t.jsxs(te,{"aria-label":"breadcrumb",children:[t.jsx(p,{underline:"hover",color:"inherit",to:"/dashboard",children:"Dashbaord"}),t.jsx(p,{underline:"hover",color:"inherit",to:"/users",children:"Conversion Management"}),t.jsx(se,{color:"text.primary",children:"Create"})]}),t.jsx(I,{variant:"contained",color:"primary",onClick:()=>$(),children:"Back"})]}),t.jsx(ae,{children:t.jsx(r,{sx:{p:4},children:t.jsxs("form",{onSubmit:M,children:[JSON.parse(localStorage.getItem("user")).role_id===x.Admin?t.jsxs(f,{fullWidth:!0,sx:{mb:3},children:[t.jsx(g,{style:{background:"#ffffff"},children:"Shop"}),t.jsx(b,{name:"from_product",labelId:"demo-simple-select-label",id:"demo-simple-select",value:u,label:"Age",onChange:Z,children:c==null?void 0:c.map(e=>t.jsx(S,{value:e.id,children:e.name}))})]}):t.jsx("div",{}),t.jsxs(f,{fullWidth:!0,sx:{mb:3},children:[t.jsx(g,{style:{background:"#ffffff"},children:"From Product"}),t.jsx(b,{disabled:h===x.Admin?!u:!1,name:"from_product",labelId:"demo-simple-select-label",id:"demo-simple-select",value:v,label:"Age",onChange:z,children:l==null?void 0:l.map(e=>t.jsx(S,{value:e.id,children:e.pos_products}))})]}),t.jsxs(f,{fullWidth:!0,sx:{mb:3},children:[t.jsx(g,{style:{background:"#ffffff"},children:"To Product"}),t.jsx(b,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:y,label:"Age",onChange:H,children:d==null?void 0:d.map(e=>t.jsx(S,{value:e.id,children:e.product_name}))})]}),t.jsx(r,{sx:{mb:3},children:t.jsx(_,{name:"from_qty",id:"outlined-basic",fullWidth:!0,label:"From Qty",variant:"outlined",onChange:U,required:!0})}),t.jsx(r,{sx:{mb:3},children:t.jsx(_,{name:"to_qty",id:"outlined-basic",fullWidth:!0,label:"To Qty",variant:"outlined",onChange:Y,required:!0})}),t.jsxs(r,{sx:{pb:3,display:"flex",mt:2,float:"right"},children:[t.jsx(p,{underline:"hover",color:"primary",to:"/conversion/list",children:t.jsx(I,{variant:"outlined",color:"primary",sx:{borderRadius:1,marginRight:1},children:"Cancel"})}),t.jsx(oe,{type:"submit",size:"medium",variant:"contained",sx:{borderRadius:1},loading:w,children:"Convert"})]})]})})}),t.jsx(ne,{position:re,autoClose:1500})]})}function ue(){return t.jsxs(t.Fragment,{children:[t.jsx(le,{children:t.jsx("title",{children:" Juvenus | Create Conversation "})}),t.jsx(ie,{})]})}export{ue as default};
