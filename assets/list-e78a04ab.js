import{r as m,aU as X,j as t,a6 as tt,B as A,Y as P,Z as E,aj as G,y as O,a9 as at,A as _,P as s,am as et,aa as I,ab as g,ao as nt,w as R,aJ as ot,x as it,T as rt,I as st,C as lt,z as ct,D as dt,E as ut,F as mt,G as gt,H as ht,J as xt,W as pt}from"./index-019ce5a6.js";import{C as yt,S as jt}from"./Stack-4cf92a60.js";import{T as _t}from"./TableFooter-12fd2237.js";function W({filter:u,handleFilter:r,handleClear:b,onFilterCounter:T,onFilterPayment:y}){const[S,v]=m.useState(null),w=Object.entries(X).map(([n,x])=>({key:n,value:x})),f=async()=>{const n=await _.GetPaymentMethodList();v(n==null?void 0:n.data),console.log(n==null?void 0:n.data)};return m.useEffect(()=>{f()},[]),t.jsx(tt,{sx:{height:96,display:"flex",justifyContent:"space-between",p:n=>n.spacing(0,1,0,3)},children:t.jsxs(A,{sx:{display:"flex",justifyContent:"space-between",gap:"1rem"},children:[t.jsx(P,{InputLabelProps:{shrink:!0},name:"keyword",defaultValue:u.keyword,placeholder:"Search ...",onChange:r,id:"keyword",label:"Search",variant:"outlined"}),t.jsx(P,{type:"date",InputLabelProps:{shrink:!0},name:"from_date",defaultValue:u.from_date,onChange:r,id:"from-date",label:"From Date",variant:"outlined"}),t.jsx(P,{type:"date",InputLabelProps:{shrink:!0},name:"to_date",defaultValue:u.to_date,onChange:r,id:"to-date",label:"To Date",variant:"outlined"}),t.jsx(E,{sx:{width:"150px"},children:t.jsx(G,{disablePortal:!0,name:"counter_id",options:w,getOptionLabel:n=>n.key,isOptionEqualToValue:(n,x)=>n.value===x.value,onChange:(n,x)=>T(n,x),renderInput:n=>t.jsx(P,{...n,label:"Counter"})})}),t.jsx(E,{sx:{width:"150px"},children:t.jsx(G,{disablePortal:!0,name:"payment_method",options:S,getOptionLabel:n=>n.payment_name,onChange:(n,x)=>y(n,x),renderInput:n=>t.jsx(P,{...n,label:"Payments"})})}),t.jsx(A,{sx:{alignSelf:"center"},children:t.jsx(O,{variant:"outlined",sx:{ml:3},startIcon:t.jsx(at,{}),onClick:b,children:"Clear"})})]})})}W.propTypes={filter:s.object,onFilterKeyword:s.func,handleClear:s.func,handleFilter:s.func,onFilterCounter:s.func,onFilterPayment:s.func};function B({headLabel:u}){return t.jsx(et,{children:t.jsx(I,{children:u.map(r=>t.jsx(g,{align:r.align||"left",sx:{width:r.width,minWidth:r.minWidth},children:t.jsx(nt,{hideSortIcon:!0,children:r.label})},r.id))})})}B.propTypes={headLabel:s.array};function M({no:u,id:r,voucher:b,settlement_amount:T,payment_method:y,customer_id:S,type:v,counter_id:w,created_at:f,cashier_id:n}){return R(),ot(),m.useState(!1),t.jsx(t.Fragment,{children:t.jsxs(I,{hover:!0,tabIndex:-1,role:"checkbox",children:[t.jsx(g,{align:"center",children:r}),t.jsx(g,{align:"center",children:f??"-"}),t.jsx(g,{align:"center",children:b??"-"}),t.jsx(g,{align:"center",children:T??"-"}),t.jsx(g,{align:"center",children:(y==null?void 0:y.length)>0?y.join(", "):"-"}),t.jsx(g,{align:"center",children:S??"-"}),t.jsx(g,{align:"center",children:n}),t.jsx(g,{align:"center",children:w??"-"})]})})}M.propTypes={no:s.number,id:s.number,voucher:s.string,settlement_amount:s.string,payment_method:s.array,user_package_id:s.string,customer_id:s.string,type:s.string,counter_id:s.number,created_at:s.string,cashier_id:s.string};function ft(){const u=R(),[r]=it(),b=r.get("page"),T=r.get("keyword"),y=r.get("from_date"),S=r.get("to_date"),v=r.get("counter_id"),w=r.get("payment"),[f,n]=m.useState(null),[x,N]=m.useState(!0),[V,C]=m.useState(0),[$,L]=m.useState([]);m.useState(null),m.useState([]);const[bt,z]=m.useState([]);m.useState(null);const D=new Date().toISOString().slice(0,10),p={page:b??1,keyword:T??D,from_date:y??D,to_date:S??"",counter_id:v??"",payment:w??""},H=async i=>{var e,a,l,c,d;const o=await _.GetSettlementTransactionList(i);L((a=(e=o==null?void 0:o.data)==null?void 0:e.settlementData)==null?void 0:a.data),C((l=o==null?void 0:o.data)==null?void 0:l.totalAmount),n((d=(c=o==null?void 0:o.data)==null?void 0:c.settlementData)==null?void 0:d.pagination),N(!1)},J=async()=>{const i=await _.GetTransactionIdLists();z(i==null?void 0:i.data)};m.useEffect(()=>{H(p),J()},[]);const q=async(i,o)=>{var l,c,d,h,j;const e={...p,page:o};u(`/report/settlment-transaction?page=${e.page}&from_date=${e.from_date}&to_date=${e.to_date}&counter_id=${e.counter_id}&payment=${e.payment}`);const a=await _.GetSettlementTransactionList(e);L((c=(l=a==null?void 0:a.data)==null?void 0:l.settlementData)==null?void 0:c.data),C((d=a==null?void 0:a.data)==null?void 0:d.totalAmount),n((j=(h=a==null?void 0:a.data)==null?void 0:h.settlementData)==null?void 0:j.pagination)},U=async i=>{var a,l,c,d,h;const o={...p,[i.target.name]:i.target.value};console.log(o),u(`/report/settlment-transaction?page=${o.page}&from_date=${o.from_date}&to_date=${o.to_date}&counter_id=${o.counter_id}&payment=${o.payment}`);const e=await _.GetSettlementTransactionList(o);L((l=(a=e==null?void 0:e.data)==null?void 0:a.settlementData)==null?void 0:l.data),C((c=e==null?void 0:e.data)==null?void 0:c.totalAmount),n((h=(d=e==null?void 0:e.data)==null?void 0:d.settlementData)==null?void 0:h.pagination)},K=async(i,o)=>{var l,c,d,h,j;const e={...p,counter_id:o.value};u(`/report/settlment-transaction?page=${e.page}&from_date=${e.from_date}&to_date=${e.to_date}&counter_id=${e.counter_id}&payment=${e.payment}`);const a=await _.GetSettlementTransactionList(e);L((c=(l=a==null?void 0:a.data)==null?void 0:l.settlementData)==null?void 0:c.data),C((d=a==null?void 0:a.data)==null?void 0:d.totalAmount),n((j=(h=a==null?void 0:a.data)==null?void 0:h.settlementData)==null?void 0:j.pagination)},Y=async(i,o)=>{var l,c,d,h,j,k,F;const e={...p,payment:o.id};console.log(e),u(`/report/settlment-transaction?page=${e.page}&from_date=${e.from_date}&to_date=${e.to_date}&counter_id=${e.counter_id}&payment=${e.payment}`);const a=await _.GetSettlementTransactionList(e);console.log((c=(l=a==null?void 0:a.data)==null?void 0:l.settlementData)==null?void 0:c.data),L((h=(d=a==null?void 0:a.data)==null?void 0:d.settlementData)==null?void 0:h.data),C((j=a==null?void 0:a.data)==null?void 0:j.totalAmount),n((F=(k=a==null?void 0:a.data)==null?void 0:k.settlementData)==null?void 0:F.pagination)},Z=async()=>{u("/report/settlment-transaction"),window.location.reload()},Q=()=>{console.log(p),_.SettlementTransactionExport(p)};return t.jsxs(yt,{maxWidth:"xl",children:[t.jsxs(jt,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[t.jsx(rt,{variant:"h4",children:"Settlement Transaction Report"}),t.jsx(O,{variant:"contained",onClick:Q,color:"primary",startIcon:t.jsx(st,{icon:"eva:arrow-downward-fill"}),children:"Export"})]}),t.jsxs(lt,{children:[t.jsx(W,{filter:p,handleFilter:U,onFilterCounter:K,onFilterPayment:Y,handleClear:Z}),x&&t.jsx(ct,{color:"secondary"}),t.jsx(dt,{children:t.jsx(ut,{sx:{overflow:"unset"},children:t.jsxs(mt,{sx:{minWidth:1e3},children:[t.jsx(B,{headLabel:[{id:"id",label:"No",align:"center"},{id:"created_at",label:"Date",align:"center"},{id:"voucher",label:"TransactionId",align:"center"},{id:"settlement_amount",label:"Settlement Amount",align:"center"},{id:"payment_type",label:"Payment Method",align:"center"},{id:"customer_id",label:"Customer",align:"center"},{id:"caisher_id",label:"Cashier",align:"center"},{id:"counter_id",label:"Counter",align:"center"}]}),t.jsx(gt,{children:$?$.map((i,o)=>t.jsx(M,{no:i.id,id:o+1,created_at:i.created_at,voucher:i.voucher,settlement_amount:i.settlement_amount,payment_method:i.payment_method,customer_id:i.customer,cashier_id:i.cashier,counter_id:i.counter_id},i.id)):!x&&t.jsx(ht,{query:p.keyword})}),t.jsx(_t,{children:t.jsxs(I,{children:[t.jsx(g,{colSpan:7,align:"right",sx:{fontWeight:"bold",fontSize:"14px"},children:"Sub Total Amount"}),t.jsx(g,{align:"right",sx:{fontWeight:"bold",fontSize:"14px"},children:V}),t.jsx(g,{})]})})]})})}),f&&t.jsx(xt,{sx:{float:"right"},count:f.total_page,page:f.page,onChange:q})]})]})}function Ct(){return t.jsxs(t.Fragment,{children:[t.jsx(pt,{children:t.jsx("title",{children:" Juvenus POS | Outstanding List "})}),t.jsx(ft,{})]})}export{Ct as default};
