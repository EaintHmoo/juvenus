import{w as v,j as e,aa as L,ab as h,P as n,am as H,ao as O,a6 as U,B as z,a7 as J,a8 as Q,I as Y,Y as I,y as K,a9 as M,r as j,x as X,A as y,t as Z,S as ee,T as ae,C as te,z as ne,D as oe,E as le,F as re,G as de,J as ce}from"./index-019ce5a6.js";function D({id:s,no:r,name:g,treatmentName:m,date:u,deleted_by:C,counter:w,isCancel:P,cancelAmount:T}){return v(),e.jsx(e.Fragment,{children:e.jsxs(L,{hover:!0,tabIndex:-1,role:"checkbox",children:[e.jsx(h,{align:"center",children:r}),e.jsx(h,{align:"center",children:g}),e.jsx(h,{align:"center",children:m}),e.jsx(h,{align:"center",children:new Date(u).toLocaleDateString("en-US")}),e.jsx(h,{align:"center",children:T}),e.jsx(h,{align:"center",children:w}),e.jsx(h,{align:"center",children:C})]})})}D.propTypes={id:n.number,name:n.string,treatmentName:n.string,date:n.string,qty:n.number,deleted_by:n.string,counter:n.number,no:n.number,isCancel:n.bool,cancelAmount:n.any};function N({headLabel:s}){return e.jsx(H,{children:e.jsx(L,{children:s.map(r=>e.jsx(h,{align:r.align||"left",sx:{width:r.width,minWidth:r.minWidth},children:e.jsx(O,{hideSortIcon:!0,children:r.label})},r.id))})})}N.propTypes={headLabel:n.array};function A({handleClear:s,filter:r,handleFilter:g}){return e.jsx(U,{sx:{height:96,display:"flex",justifyContent:"space-between",p:m=>m.spacing(0,1,0,3)},children:e.jsxs(z,{sx:{display:"flex",justifyContent:"space-between",gap:"1rem"},children:[e.jsx(J,{defaultValue:r.keyword,name:"keyword",onChange:g,placeholder:"Search ...",startAdornment:e.jsx(Q,{position:"start",children:e.jsx(Y,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),e.jsx(I,{type:"date",InputLabelProps:{shrink:!0},defaultValue:r.from_date,name:"from_date",onChange:g,id:"from-date",label:"From Date",variant:"outlined"}),e.jsx(I,{type:"date",InputLabelProps:{shrink:!0},defaultValue:r.to_date,name:"to_date",onChange:g,id:"to-date",label:"To Date",variant:"outlined"}),e.jsx(K,{variant:"outlined",sx:{ml:3},startIcon:e.jsx(M,{}),onClick:s,children:"Clear"})]})})}A.propTypes={filterName:n.string,onFilterName:n.func,handleClear:n.func,filter:n.object,handleFilter:n.func};function se({isDelete:s,headLabel:r,isCancel:g}){const[m,u]=j.useState([]),[C,w]=j.useState(!0),[P,T]=j.useState(""),x=v(),[k]=X(),[i,p]=j.useState(null),F=k.get("from_date"),G=k.get("to_date"),$=k.get("page"),B=k.get("keyword"),S=new Date().toISOString().slice(0,10),b={from_date:F??S,to_date:G??S,page:$??1,keyword:B??""};j.useEffect(()=>{s?E(b):W(b)},[]);const q=async()=>{x(s?"/package-delete-log":"/package-cancel-log"),window.location.reload()},E=async o=>{var t,c;console.log(o);const a=await y.GetPackageDeleteLog(o);console.log(a.data.data),u((t=a.data)==null?void 0:t.data),p((c=a==null?void 0:a.data)==null?void 0:c.pagination),w(!1)},W=async o=>{var t,c;const a=await y.GetPackageCancelLog(o);console.log(a.data),u((t=a.data)==null?void 0:t.data),p((c=a==null?void 0:a.data)==null?void 0:c.pagination),w(!1)},R=async o=>{var t,c,f,_;const a={...b,[o.target.name]:o.target.value};if(console.log(a),s){x(`/package-delete-log?page=${a.page}&keyword=${a.keyword??""}&from_date=${a.from_date}&to_date=${a.to_date}`);const l=await y.GetPackageDeleteLog(a);u((t=l==null?void 0:l.data)==null?void 0:t.data),p((c=l==null?void 0:l.data)==null?void 0:c.pagination)}else{x(`/package-cancel-log?page=${a.page}&keyword=${a.keyword??""}&from_date=${a.from_date}&to_date=${a.to_date}`);const l=await y.GetPackageCancelLog(a);u((f=l==null?void 0:l.data)==null?void 0:f.data),p((_=l==null?void 0:l.data)==null?void 0:_.pagination)}},V=async(o,a)=>{var c,f,_,l;const t={...b,[$]:a};if(s){x(`/package-delete-log?page=${t.page}&keyword=${t.keyword??""}&from_date=${t.from_date}&to_date=${t.to_date}`);const d=await y.GetPackageDeleteLog(t);u((c=d==null?void 0:d.data)==null?void 0:c.data),p((f=d==null?void 0:d.data)==null?void 0:f.pagination)}else{x(`/package-cancel-log?page=${t.page}&keyword=${t.keyword??""}&from_date=${t.from_date}&to_date=${t.to_date}`);const d=await y.GetPackageCancelLog(t);u((_=d==null?void 0:d.data)==null?void 0:_.data),p((l=d==null?void 0:d.data)==null?void 0:l.pagination)}};return e.jsxs(Z,{maxWidth:"xl",children:[e.jsx(ee,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(ae,{variant:"h4",children:r})}),e.jsxs(te,{children:[e.jsx(A,{filterName:P,handleClear:q,filter:b,handleFilter:R}),C&&e.jsx(ne,{color:"secondary"}),e.jsx(oe,{children:e.jsx(le,{sx:{overflow:"unset"},children:e.jsxs(re,{sx:{minWidth:1e3},children:[e.jsx(N,{headLabel:[{id:"no",label:"No",align:"center"},{id:"name",label:"name",align:"center"},{id:"treatment_name",label:"treatment_name",align:"center"},{id:"date",label:"date",align:"center"},...g?[{id:"cancel_amount",label:"Cancel Amount",align:"center"}]:[],{id:"qty",label:"Quantity",align:"center"},{id:"deleted_by",label:s?"Deleted By":"Cancel By",align:"center"}]}),e.jsx(de,{children:(m==null?void 0:m.length)>0&&m.map((o,a)=>e.jsx(D,{no:a+1+(i==null?void 0:i.row_count)*((i==null?void 0:i.page)-1),name:o.settlement_customer.name,date:o.created_at,treatmentName:o.settlement_package.pos_treatment_name,quantity:o.qty,deleted_by:o.settlement_cashier.name,counter:o.counter_id,isCancel:g,cancelAmount:o.settlement_amount},o.id))})]})})}),i&&e.jsx(ce,{sx:{float:"right",p:"20px"},count:i.total_page,page:i.page,onChange:V})]})]})}se.propTypes={isDelete:n.bool,isCancel:n.bool,headLabel:n.string};export{se as P};
